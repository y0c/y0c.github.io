<!DOCTYPE html><html><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>ğŸ“¦ Monorepo Tutorial | y0c</title><link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/css/highlights/dracula.css"><link rel="canonical" href="https://y0c.github.io/2019/06/14/monorepo-tutorial/">
<meta name="description" content="Monorepoì— ëŒ€í•´ í•™ìŠµí•œ ë‚´ìš©ì„ ì •ë¦¬í•œ ê¸€ì´ë‹¤.  ğŸ“¦ Monorepo?ì—¬ëŸ¬ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë‹¤ ë³´ë©´ ë™ì¼í•œ ëª¨ë“ˆì„ ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ë„ ê°™ì´ ì‚¬ìš©í•´ì•¼ ë  ê²½ìš°ê°€ ìƒê¸´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ backendì—ì„œ admin ê³¼ ì‹¤ì œ ì„œë¹„ìŠ¤ í”„ë¡œì íŠ¸ ê°„ì˜â€¦">
<meta name="keywords" content="javascript,yarn,monorepo">
<meta property="og:type" content="article">
<meta property="og:title" content="ğŸ“¦ Monorepo Tutorial">
<meta property="og:url" content="https://y0c.github.io/2019/06/14/monorepo-tutorial/">
<meta property="og:site_name" content="y0c">
<meta property="og:description" content="Monorepoì— ëŒ€í•´ í•™ìŠµí•œ ë‚´ìš©ì„ ì •ë¦¬í•œ ê¸€ì´ë‹¤.  ğŸ“¦ Monorepo?ì—¬ëŸ¬ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë‹¤ ë³´ë©´ ë™ì¼í•œ ëª¨ë“ˆì„ ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ë„ ê°™ì´ ì‚¬ìš©í•´ì•¼ ë  ê²½ìš°ê°€ ìƒê¸´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ backendì—ì„œ admin ê³¼ ì‹¤ì œ ì„œë¹„ìŠ¤ í”„ë¡œì íŠ¸ ê°„ì˜â€¦">
<meta property="og:image" content="https://y0c.github.io/images/monorepo.png">
<meta property="og:updated_time" content="2019-06-17T16:03:59.500Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ğŸ“¦ Monorepo Tutorial">
<meta name="twitter:description" content="Monorepoì— ëŒ€í•´ í•™ìŠµí•œ ë‚´ìš©ì„ ì •ë¦¬í•œ ê¸€ì´ë‹¤.  ğŸ“¦ Monorepo?ì—¬ëŸ¬ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë‹¤ ë³´ë©´ ë™ì¼í•œ ëª¨ë“ˆì„ ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ë„ ê°™ì´ ì‚¬ìš©í•´ì•¼ ë  ê²½ìš°ê°€ ìƒê¸´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ backendì—ì„œ admin ê³¼ ì‹¤ì œ ì„œë¹„ìŠ¤ í”„ë¡œì íŠ¸ ê°„ì˜â€¦">
<meta name="twitter:image" content="https://y0c.github.io/images/monorepo.png"><meta property="article:author" content="hosung"><meta property="twitter:label1" content="Published at"><meta property="twitter:data1" content="2019-06-14 19:17:37"><meta property="twitter:label2" content="Written by"><meta property="twitter:data2" content="hosung"><link rel="icon" href="/images/logo.png"><link rel="alternate" href="/feed.xml" type="application/atom+xml" title="y0c"><script>(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-112029921-1', 'auto');
ga('send', 'pageview');</script></head><body itemscope="" itemtype="https://schema.org/WebPage"><nav class="menu" id="menu"><div class="menu-inner"><div class="menu__left-area"><div class="menu__item"><a class="menu__item__link menu__item__link--brand" href="/" title="Home" rel="home"><img class="menu__item__link--brand__image" src="/images/logo.png" alt="y0c"><span class="menu__item__link--brand__label">y0c</span></a></div></div><div class="menu__right-area"><div class="menu__item"><a class="menu__item__link" href="/">Home</a></div><div class="menu__item"><a class="menu__item__link" href="/archives">Archives</a></div></div></div></nav><div class="page-background"></div><div class="content-container"><div class="content-outer"><div class="content-inner" itemscope="" itemtype="https://schema.org/Blog"><article class="article" id="article" itemscope="" itemtype="https://schema.org/BlogPosting"><h1 class="article__title" itemprop="headline">ğŸ“¦ Monorepo Tutorial</h1><div class="article__meta"><time class="article__meta__time" datetime="2019-06-14T10:17:37.000Z" itemprop="datePublished">2019-06-14 19:17:37</time><div class="article__meta__categories"><a class="article__meta__categories__item" href="/categories/javascript/">javascript</a></div></div><div class="article__contents"><img src="/images/monorepo.png"><p>Monorepoì— ëŒ€í•´ í•™ìŠµí•œ ë‚´ìš©ì„ ì •ë¦¬í•œ ê¸€ì´ë‹¤. </p>
<h2 id="ğŸ“¦-Monorepo"><a href="#ğŸ“¦-Monorepo" class="headerlink" title="ğŸ“¦ Monorepo?"></a>ğŸ“¦ Monorepo?</h2><p>ì—¬ëŸ¬ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë‹¤ ë³´ë©´ ë™ì¼í•œ ëª¨ë“ˆì„ ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ë„ ê°™ì´ ì‚¬ìš©í•´ì•¼ ë  ê²½ìš°ê°€ ìƒê¸´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ backendì—ì„œ admin ê³¼ ì‹¤ì œ ì„œë¹„ìŠ¤ í”„ë¡œì íŠ¸ ê°„ì˜ ëª¨ë¸, ë„ë©”ì¸ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì— ëŒ€í•œ ì½”ë“œë‚˜ í˜¹ì€ reactì™€ react-native ì‚¬ì´ì˜ ì»´í¬ë„ŒíŠ¸ ê³µìœ  ë“± ì—¬ëŸ¬ê°€ì§€ ì¼€ì´ìŠ¤ê°€ ìˆì„ ìˆ˜ ìˆë‹¤. ì´ë ‡ê²Œ ëª¨ë“ˆì„ ê³µìœ í•´ì•¼ë˜ëŠ” ìƒí™©ì—ì„œ ì¤‘ë³µë˜ëŠ” ëª¨ë“ˆë§ˆë‹¤ ë¦¬í¬ì§€í† ë¦¬ ë¶„ë¦¬í•´ì„œ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ì— ë“±ë¡í•˜ê³  ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ê°œë°œ, í…ŒìŠ¤íŠ¸, ë°°í¬ ì— ìˆì–´ì„œ ê´€ë¦¬í•˜ê¸°ê°€ ì–´ë ¤ì›Œì§„ë‹¤. ëª¨ë…¸ë¦¬í¬ëŠ” í•˜ë‚˜ì˜ ë¦¬í¬ì§€í† ë¦¬ì— ì—¬ëŸ¬ íŒ¨í‚¤ì§€ë“¤ì„ ë‘ëŠ” êµ¬ì¡°ì´ë‹¤. </p>
<h2 id="Monorepo-ì¥ì "><a href="#Monorepo-ì¥ì " class="headerlink" title="Monorepo ì¥ì "></a>Monorepo ì¥ì </h2><ul>
<li>test, build, release í”„ë¡œì„¸ìŠ¤ë¥¼ í•œ ë²ˆì— ì§„í–‰í•  ìˆ˜ ìˆë‹¤.</li>
<li>í•˜ë‚˜ì˜ ì €ì¥ì†Œì—ì„œ issueë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.</li>
<li>ëª¨ë“ˆë³„ë¡œ ê°œë³„ì ì¸ ë²„ì „ê´€ë¦¬</li>
<li>íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ì— ë“±ë¡í•˜ì§€ ì•Šê³ ë„ ì½”ë“œë¥¼ ê³µìœ í•˜ê¸° ì‰¬ì›Œì§„ë‹¤.</li>
</ul>
<h2 id="Monorepo-ë‹¨ì "><a href="#Monorepo-ë‹¨ì " class="headerlink" title="Monorepo ë‹¨ì "></a>Monorepo ë‹¨ì </h2><ul>
<li>ëŸ¬ë‹ì»¤ë¸Œ ì™€ ì´ˆê¸°ì…‹íŒ…</li>
<li>ì»¤ì§„ ë¦¬í¬ì§€í† ë¦¬ ì‚¬ì´ì¦ˆ?</li>
</ul>
<p>ì´ê²ƒ ë§ê³ ë„ ëª¨ë…¸ë¦¬í¬ë¡œ êµ¬ì„±í•´ì„œ ì¢€ ë” ë²ˆê±°ë¡œì›Œ ì§€ëŠ” ë¶€ë¶„ë“¤ë„ ìˆê² ì§€ë§Œ ì¢€ ë” ì‚¬ìš©í•´ë´ì•¼ í•  ê²ƒ ê°™ë‹¤. </p>
<h2 id="Monorepoë¥¼-êµ¬ì„±í•˜ëŠ”-ë°©ë²•"><a href="#Monorepoë¥¼-êµ¬ì„±í•˜ëŠ”-ë°©ë²•" class="headerlink" title="Monorepoë¥¼ êµ¬ì„±í•˜ëŠ” ë°©ë²•"></a>Monorepoë¥¼ êµ¬ì„±í•˜ëŠ” ë°©ë²•</h2><p>ëª¨ë…¸ë¦¬í¬ëŠ” ë¦¬í¬ì§€í† ë¦¬ë¥¼ êµ¬ì„±í•œëŠ” í˜•ì‹ì´ê¸° ë•Œë¬¸ì— ì—¬ëŸ¬ê°€ì§€ ë„êµ¬ë¥¼ í†µí•´ì„œ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤. ë³„ë‹¤ë¥¸ ë„êµ¬ ì—†ì´ë„ í•˜ë‚˜ì˜ ë¦¬í¬ì•ˆì— í´ë”ë¥¼ êµ¬ë¶„í•˜ê³  node_moduleê°„ì˜ ì‹¬ë³¼ë¦­ ë§í¬ë¥¼ í†µí•´ì„œ êµ¬í˜„í•  ìˆ˜ ìˆê² ì§€ë§Œ ë§¤ë²ˆ ë§í¬ë¥¼ ê±°ëŠ” ë°©ë²•ì€ ë¹„íš¨ìœ¨ì ì´ê³  ë²ˆê±°ë¡­ë‹¤. ì—¬ê¸°ì„  ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì¸ Yarn workspace ì™€ Lerna ì— ëŒ€í•´ ê°„ë‹¨íˆ ì†Œê°œí•´ë³´ë ¤ê³  í•œë‹¤. </p>
<h2 id="Yarn-workspace"><a href="#Yarn-workspace" class="headerlink" title="Yarn workspace"></a>Yarn workspace</h2><p>yarn workspaceëŠ” íŒ¨í‚¤ì§€ ì•„í‚¤í…ì³ë¥¼ ì„¤ì •í•˜ëŠ” ìƒˆë¡œìš´ ë°©ë²•ì´ê³  ê¸°ë³¸ì ìœ¼ë¡œ 1.0ë²„ì „ë¶€í„° ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ê³  í•œë‹¤. yarn workspaceë¥¼ ì´ìš©í•˜ë©´ ì¢€ ë” ì‰½ê²Œ ëª¨ë…¸ë¦¬í¬ ì•ˆì— ì—¬ëŸ¬ íŒ¨í‚¤ì§€ë“¤ì˜ ì˜ì¡´ì„±ì„ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤. root í´ë”ì™€ íŒ¨í‚¤ì§€ë“¤ë¡œ êµ¬ì„±í•  ìˆ˜ ìˆëŠ”ë° ëª¨ë“  íŒ¨í‚¤ì§€ë“¤ì— ëŒ€í•œ ì˜ì¡´ì„±ì„ í•œë²ˆì˜ <code>yarn install</code> ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤. ë˜í•œ ëª¨ë“ˆì€ <code>hoist</code> ë˜ì–´ì„œ root í´ë”ì˜ node_modules í´ë”ì— ì„¤ì¹˜ëœë‹¤. ë¬¼ë¡  ê³µí†µëœ ëª¨ë“ˆì¸ë° ë²„ì „ë§Œ ë‹¤ë¥¼ ê²½ìš°ì—” í•´ë‹¹ íŒ¨í‚¤ì§€ node_modulesì— ì„¤ì¹˜ëœë‹¤. </p>
<p>ì•„ë˜ íŠœí† ë¦¬ì–¼ì„ ë”°ë¼í•´ë³´ë©´ ì–´ë–¤ì‹ìœ¼ë¡œ ë™ì‘í•˜ëŠ”ì§€ ì¢€ ë” ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆë‹¤.</p>
<h3 id="Repo-Structure"><a href="#Repo-Structure" class="headerlink" title="Repo Structure"></a>Repo Structure</h3><p>êµ¬ì„±í•´ë³´ë ¤ê³  í•˜ëŠ” ëª¨ë…¸ë¦¬í¬ì˜ êµ¬ì¡°ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. ë³´í†µ <code>packages</code>ë¼ëŠ” í´ë” ì•„ë˜ íŒ¨í‚¤ì§€ë“¤ì„ ëª¨ì•„ì„œ ê´€ë¦¬í•˜ì§€ë§Œ ë‹¤ë¥¸ì´ë¦„ìœ¼ë¡œ ë°”ê¿”ë„ ë¬´ê´€í•˜ë‹¤. </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â””â”€â”€ packages</span><br><span class="line">    â”œâ”€â”€ server</span><br><span class="line">    â”œâ”€â”€ shared</span><br><span class="line">    â””â”€â”€ web</span><br></pre></td></tr></table></figure>
<p>root <code>package.json</code> ì‘ì„±</p>
<p>root directoryëŠ” íŒ¨í‚¤ì§€ë¡œ ë°°í¬ë ë¦¬ ì—†ê¸° ë•Œë¬¸ì— privateìœ¼ë¡œ ì„¤ì •í•˜ê³  workspacesì—ëŠ” íŒ¨í‚¤ì§€ í´ë”ëª…ì„ ë°°ì—´ë¡œ ë„˜ê¸¸ ìˆ˜ ìˆë‹¤. íŒ¨í„´ë„ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤. </p>
<p><code>yarn init</code> í›„ ì•„ë˜ propertyë¥¼ ì¶”ê°€í•´ì£¼ë©´ ëœë‹¤. </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;private&quot;: true,</span><br><span class="line">  &quot;workspaces&quot;: [</span><br><span class="line">    &quot;packages/*&quot;</span><br><span class="line">  ]	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>íŒ¨í‚¤ì§€ë³„ <code>package.json</code> ìƒì„± </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> packages/shared &amp;&amp; yarn init -y</span><br><span class="line"><span class="built_in">cd</span> packages/server &amp;&amp; yarn init -y</span><br><span class="line"><span class="built_in">cd</span> packages/web &amp;&amp; yarn init -y</span><br></pre></td></tr></table></figure>
<p>íŒ¨í‚¤ì§€ëª… ë³€ê²½</p>
<p><code>package.json</code> ì´ ìƒê²¼ì§€ë§Œ npm ì—ì„œ ë”°ë¡œ ì„¤ì¹˜í•œ ëª¨ë“ˆê³¼ êµ¬ë¶„í•´ì£¼ê¸° ìœ„í•´ì„œ ì•ì— <code>prefix</code>ë¥¼ ë¶™ì—¬ì£¼ëŠ” ê²ƒì´ ì¢‹ë‹¤. ì—¬ê¸°ì„  ì˜ˆì‹œë¡œ @projectë¡œ ì„¤ì •í•˜ì˜€ë‹¤. </p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"@project/server"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">  <span class="attr">"main"</span>: <span class="string">"index.js"</span>,</span><br><span class="line">  <span class="attr">"license"</span>: <span class="string">"MIT"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>yarn install</code></p>
<p>root í´ë”ë¡œ ì´ë™í›„ yarn install ì„ í•˜ë©´ node_modulesì— íŒ¨í‚¤ì§€ë“¤ì´ ì‹¬ë³¼ë¦­ ë§í¬ê°€ ìë™ìœ¼ë¡œ ê±¸ë ¤ìˆë‹¤. ì´ê±¸í†µí•´ì„œ íŒ¨í‚¤ì§€ê°„ì— ëª¨ë“ˆ ìƒí˜¸ì°¸ì¡°ê°€ ê°€ëŠ¥í•´ì§„ë‹¤.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">â””â”€â”€ @project</span><br><span class="line">    â”œâ”€â”€ server -&gt; ../../packages/server</span><br><span class="line">    â”œâ”€â”€ shared -&gt; ../../packages/shared</span><br><span class="line">    â””â”€â”€ web -&gt; ../../packages/web</span><br></pre></td></tr></table></figure>
<p>ê°„ë‹¨í•œ ì½”ë“œ ì‘ì„± </p>
<p>shared íŒ¨í‚¤ì§€ì— ì–´ë–¤í•¨ìˆ˜ë¥¼ ì¶”ê°€í•˜ê³  serveríŒ¨í‚¤ì§€ì—ì„œ sharedëª¨ë“ˆì„ ì°¸ì¡°í•´ì„œ ì‚¬ìš©í•˜ëŠ” ì˜ˆì‹œì´ë‹¤. </p>
<p><code>packages/shared/index.js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Hello Shared!'</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>shared ëª¨ë“ˆì„ ë¡œë”©í•˜ê¸°ì „ì— serveríŒ¨í‚¤ì§€ì— sharedë¥¼ ì˜ì¡´ì„±ìœ¼ë¡œ ì¶”ê°€í•´ì£¼ì–´ì•¼ í•œë‹¤. </p>
<p>(ìˆ˜ë™ìœ¼ë¡œ ì¶”ê°€í•´ë„ ë¬´ë°©í•˜ë‹¤.)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn workspace @project/server add @project/shared@1.0.0</span><br></pre></td></tr></table></figure>
<p><code>packages/server/index.js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sharedFunc = <span class="built_in">require</span>(<span class="string">'@project/shared'</span>);</span><br><span class="line">sharedFunc();</span><br></pre></td></tr></table></figure>
<p><code>server/index.js</code> ì‹¤í–‰ </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node packages/server/index</span><br></pre></td></tr></table></figure>
<p>npm ëª¨ë“ˆ ì¶”ê°€ (hoist)</p>
<p><code>packages/server/package.json</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">"dependencies": &#123;</span><br><span class="line">  "@project/shared": "1.0.0",</span><br><span class="line">  "axios": "^0.19.0",</span><br><span class="line">  "jest": "^24.8.0",</span><br><span class="line">  "query-string": "^6.7.0"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>packages/web/package.json</code> ,<br><code>packages/shared/package.json</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">"dependencies": &#123;</span><br><span class="line">  "query-string": "^6.7.0",</span><br><span class="line">  "jest": "24.0.0",</span><br><span class="line">  "axios": "0.18.0"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ëª¨ë“ˆì„ ë‹¤ìŒê³¼ ê°™ì´ ì¶”ê°€í•œ í›„ rootì—ì„œ <code>yarn install</code> ì„ í•˜ë©´ íŒ¨í‚¤ì§€ë³„ë¡œ ê³µí†µëœ ëª¨ë“ˆì— ê°™ì€ ë²„ì „ì´ë¼ë©´ <code>hoist</code>ë˜ì–´ì„œ root í´ë”ì— node_modulesì— ì„¤ì¹˜ëœë‹¤. ë²„ì „ì´ ë‹¤ë¥´ë‹¤ë©´ íŒ¨í‚¤ì§€ì•„ë˜ node_modulesê°€ ì‚¬ìš©ë  ê²ƒì´ë‹¤. ë§Œì•½ hositë¥¼ ê¸°ëŠ¥ìœ¼ë¡œ ì¸í•´ ê²½ë¡œìƒì˜ ë¬¸ì œë‚˜ ë‹¤ë¥¸ ë¬¸ì œê°€ ë°œìƒí•œë‹¤ë©´ <code>nohoist</code> ì˜µì…˜ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì´ì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…ì€ ì•„ë˜ ì°¸ì¡° ë§í¬ë¥¼ ë‚¨ê²¨ë‘ì—ˆë‹¤.</p>
<h2 id="Lerna"><a href="#Lerna" class="headerlink" title="Lerna"></a>Lerna</h2><p>LernaëŠ” ëª¨ë…¸ë¦¬í¬ì˜ workflowë¥¼ ìµœì í™” ì‹œì¼œì£¼ëŠ” íˆ´ì´ë‹¤. ì—¬ê¸°ì„œ ë§í•˜ëŠ” workflowë€ test, build, versioning, publishing ë“±ê³¼ ê°™ì€ í™œë™ë“¤ì„ ëœ»í•œë‹¤. ë¬¼ë¡  ëª¨ë…¸ë¦¬í¬ì•ˆì— ì—¬ëŸ¬ íŒ¨í‚¤ì§€ê°„ì˜ ì˜ì¡´ì„±ì„ ê´€ë¦¬í•´ì£¼ëŠ” ì¼ë„ í•˜ê³  ìˆë‹¤. ê·¸ëŸ¬ë‚˜ ìµœê·¼ì—ëŠ” ì˜ì¡´ì„±ê´€ë¦¬ ì™€ ê°™ì€ ê¸°ëŠ¥ì€ yarn workspaceì— ìœ„ì„í•˜ì—¬ ê°™ì´ ì‚¬ìš©í•˜ëŠ” ì¶”ì„¸ì¸ ê²ƒ ê°™ë‹¤. </p>
<p>ì´ ê¸€ì—ì„  yarn workspaceì™€ ê°™ì´ ì‚¬ìš©í•˜ëŠ” íŠœí† ë¦¬ì–¼ì„ ë§Œë“¤ì–´ë³´ì—ˆë‹¤.</p>
<p>ìœ„ì—ì„œ êµ¬ì„±í•´ë†“ì€ yarn workspaceì— lernaë¥¼ ì¶”ê°€í•œë‹¤. </p>
<p>lernaëŠ” rootì— ì„¤ì¹˜í•´ì•¼í•˜ë¯€ë¡œ <code>-W</code> ì˜µì…˜ì„ ë¶™ì—¬ì„œ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add -W -D lerna</span><br></pre></td></tr></table></figure>
<p>lerna ì„¤ì •íŒŒì¼ì„ ë§Œë“¤ì–´ì¤€ë‹¤. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx lerna init</span><br></pre></td></tr></table></figure>
<p>yarn workspaceì™€ ê°™ì´ ì‚¬ìš©í•˜ê¸° ìœ„í•´ <code>lerna.json</code>íŒŒì¼ì„ ìˆ˜ì •í•œë‹¤. </p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"useWorkspaces"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">"npmClient"</span>: <span class="string">"yarn"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"0.0.0"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ëª¨ë“  íŒ¨í‚¤ì§€ì— test scriptsë¥¼ ì¶”ê°€í•œë‹¤. </p>
<p>í•´ë‹¹ ìŠ¤í¬ë¦½íŠ¸ëŠ” ë‹¨ìˆœíˆ ì½˜ì†”ì— íŒ¨í‚¤ì§€ëª…ì„ ì¶œë ¥í•´ì¤€ë‹¤.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  "test": "echo test $npm_package_name"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>lerna run</code> commandë¥¼ í†µí•´ì„œ íŒ¨í‚¤ì§€ì˜ scriptë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx lerna run <span class="built_in">test</span></span><br></pre></td></tr></table></figure>
<p>ì¶œë ¥ê²°ê³¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">test @project/web</span><br><span class="line">test @project/shared</span><br><span class="line">test @project/server</span><br></pre></td></tr></table></figure>
<p><code>â€”scope</code> ì˜µì…˜ì„ í†µí•´ì„œ íŠ¹ì • íŒ¨í‚¤ì§€ë§Œ ì‹¤í–‰í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx lerna run <span class="built_in">test</span> --scope=&#123;@project/web,@project/server&#125;</span><br></pre></td></tr></table></figure>
<p>lerna ì—ëŠ” runë§ê³ ë„ ìœ ìš©í•œ commandê°€ ë§ì´ ì¡´ì¬í•œë‹¤. </p>
<p>ì•„ë˜ì—ëŠ” ê°„ë‹¨íˆ ì£¼ìš”ëª…ë ¹ì–´ì— ëŒ€í•´ ì •ë¦¬í•´ë³´ì•˜ë‹¤.</p>
<ul>
<li><code>lerna bootstrap</code> - íŒ¨í‚¤ì§€ë“¤ì˜ ì˜ì¡´ì„±ì„ ì„¤ì¹˜í•œë‹¤. yarn workspaceë¥¼ ì‚¬ìš©ì¤‘ì´ë¼ë©´ yarnì— ìœ„ì„í•œë‹¤.</li>
<li><code>lerna clean</code> - íŒ¨í‚¤ì§€ì— node_modules í´ë”ë¥¼ ëª¨ë‘ ì‚­ì œí•œë‹¤.</li>
<li><code>lerna run</code> - íŒ¨í‚¤ì§€ì˜ íŠ¹ì • scriptsë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.</li>
<li><code>lerna exec</code> - íŒ¨í‚¤ì§€ ê²½ë¡œì—ì„œ íŠ¹ì • commandë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.</li>
<li><code>lerna version</code> - íŒ¨í‚¤ì§€ë³„ë¡œ ë³€ê²½ëœ íŒ¨í‚¤ì§€ë§Œ version bump</li>
</ul>
<p>ìì„¸í•œ ì˜µì…˜ì´ë‚˜ ì‚¬ìš©ì˜ˆì‹œëŠ” <a href="https://github.com/lerna/lerna" rel="external nofollow noopener noreferrer" target="_blank">lerna github page</a>ì„ ì°¸ê³ í•˜ë„ë¡ í•˜ì. </p>
<h2 id="ë§ˆë¬´ë¦¬"><a href="#ë§ˆë¬´ë¦¬" class="headerlink" title="ë§ˆë¬´ë¦¬"></a>ë§ˆë¬´ë¦¬</h2><p>í”„ë¡œì íŠ¸ë¥¼ í•˜ë‹¤ë³´ë©´ â€œì´ ëª¨ë“ˆì€ ë‹¤ë¥¸ê³³ì—ì„œë„ ì“°ì¼ ê²ƒ ê°™ì€ë°?â€ ì´ë ‡ê²Œ ìƒê°í•´ë³¸ê²Œ ë§ì´ ìˆì—ˆë˜ ê²ƒ ê°™ë‹¤.<br>ì§„í–‰í–ˆë˜ reactí”„ë¡œì íŠ¸ ì¤‘ ì—¬ëŸ¬ í”„ë¡œì íŠ¸ì—ì„œ ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” UIë“¤ì€ storybookê³¼ í•¨ê»˜ component ëª¨ìŒì„ ë§Œë“¤ì–´ë‘ê³  ì‚¬ìš©í•œ ì ì´ ìˆë‹¤. í•˜ì§€ë§Œ í”„ë¡œì íŠ¸ ë¦¬í¬ì§€í† ë¦¬ê°€ ë¶„ë¦¬ë˜ì–´ ìˆì—ˆê³  ê°™ì´ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„  npm git repositoryë¥¼ ì´ìš©í•˜ê±°ë‚˜ git submoduleì„ ì„ íƒí•´ì•¼í–ˆëŠ”ë° ê°œë°œì„ ìœ„í•´ì„œ í”„ë¡œì íŠ¸ë¥¼ ì—¬ëŸ¬ê°œ ë„ì›Œì•¼í•˜ê³  ì¡°ê·¸ë§Œ ë³€ê²½ì—ë„ ë²„ì „ì„ ì˜¬ë¦¬ê³  ë‹¤ì‹œ ë°›ì•„ì•¼ë˜ì„œ ë²ˆê±°ë¡œì› ë˜ ê²½í—˜ì´ ìˆë‹¤. ë§Œì•½ ëª¨ë…¸ë¦¬í¬ë¡œ êµ¬ì„±ë˜ì–´ìˆë‹¤ë©´ ì¢€ ë” ë‚˜ì€ ë°©ë²•ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆì§€ ì•Šì•˜ì„ê¹Œ í•˜ëŠ” ìƒê°ì´ ë“ ë‹¤.<br>ëª¨ë…¸ë¦¬í¬ê°€ ë©€í‹°ë¦¬í¬ë³´ë‹¤ ë¬´ì¡°ê±´ ì¢‹ë‹¤ê³  ìƒê°í•˜ì§„ ì•ŠëŠ”ë‹¤. ë‹¤ë§Œ í”„ë¡œì íŠ¸ë¥¼ êµ¬ì„±í•˜ëŠ” ë°©ë²•ë„ ì—¬ëŸ¬ê°€ì§€ ì•Œì•„ë‘ë©´ ìƒí™©ì— ë§ì¶°ì„œ ì¢‹ì€ êµ¬ì¡°ë¥¼ ì„ íƒí•  ìˆ˜ ìˆì„ê²ƒ ê°™ë‹¤. </p>
<h2 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h2><ul>
<li><a href="https://yarnpkg.com/blog/2017/08/02/introducing-workspaces/" rel="external nofollow noopener noreferrer" target="_blank">https://yarnpkg.com/blog/2017/08/02/introducing-workspaces/</a></li>
<li><a href="https://yarnpkg.com/en/docs/workspaces" rel="external nofollow noopener noreferrer" target="_blank">https://yarnpkg.com/en/docs/workspaces</a></li>
<li><a href="https://yarnpkg.com/blog/2018/02/15/nohoist/" rel="external nofollow noopener noreferrer" target="_blank">https://yarnpkg.com/blog/2018/02/15/nohoist/</a></li>
<li><a href="https://github.com/lerna/lerna" rel="external nofollow noopener noreferrer" target="_blank">https://github.com/lerna/lerna</a></li>
</ul>
</div><div class="article__tags"><a class="article__tags__item" href="/tags/javascript/">javascript</a><a class="article__tags__item" href="/tags/yarn/">yarn</a><a class="article__tags__item" href="/tags/monorepo/">monorepo</a></div><div class="article__author" itemscope="" itemprop="author" itemtype="https://schema.org/Person"><img class="article__author__image" src="/images/profile.jpg" alt="hosung"><a class="article__author__link" title="About hosung" rel="author">hosung</a><p class="article__author__desc">ğŸ”¥ Typescript</p><div class="article__author__socials"><a class="article__author__socials__item" href="http://github.com/y0c" title="github" target="_blank" rel="external nofollow noopener noreferrer"><i class="fa fa-github"></i></a><a class="article__author__socials__item" href="/feed.xml" title="rss" target="_blank"><i class="fa fa-rss"></i></a></div><meta itemprop="name" content="hosung"></div><div class="sharer" id="sharer"><div class="sharer-inner"><div class="sharer__right"><button class="sharer__item" id="sharer-facebook"><i class="fa fa-facebook-official"></i></button><button class="sharer__item" id="sharer-twitter"><i class="fa fa-twitter"></i></button><button class="sharer__item" id="sharer-pinterest"><i class="fa fa-pinterest"></i></button><button class="sharer__item" id="sharer-pocket"><i class="fa fa-get-pocket"></i></button></div></div></div><!-- Disqus Code--><div id="disqus_thread"></div><script>(function() {
  var d = document, s = d.createElement('script');
  s.src = '//lazy-developer.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
})();</script><noscript>Enable JavaScript to see comments.</noscript><!-- Meta Tags for Structured Data--><meta itemprop="dateModified" content="2019-06-17T16:03:59.500Z"><meta itemprop="articleBody" content="Monorepoì— ëŒ€í•´ í•™ìŠµí•œ ë‚´ìš©ì„ ì •ë¦¬í•œ ê¸€ì´ë‹¤. 
ğŸ“¦ Monorepo?ì—¬ëŸ¬ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë‹¤ ë³´ë©´ ë™ì¼í•œ ëª¨ë“ˆì„ ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ë„ ê°™ì´ ì‚¬ìš©í•´ì•¼ ë  ê²½ìš°ê°€ ìƒê¸´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ backendì—ì„œ admin ê³¼ ì‹¤ì œ ì„œë¹„ìŠ¤ í”„ë¡œì íŠ¸ ê°„ì˜ ëª¨ë¸, ë„ë©”ì¸ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì— ëŒ€í•œ ì½”ë“œë‚˜ í˜¹ì€ reactì™€ react-native ì‚¬ì´ì˜ ì»´í¬ë„ŒíŠ¸ ê³µìœ  ë“±..."><meta itemprop="url" content="https://y0c.github.io/2019/06/14/monorepo-tutorial/"><meta itemprop="mainEntityOfPage" content="https://y0c.github.io/2019/06/14/monorepo-tutorial/"><div itemscope="" itemtype="https://schema.org/Organization" itemprop="publisher"><meta itemprop="name" content="y0c"><div itemscope="" itemprop="logo" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://y0c.github.io/images/logo.png"></div></div><div itemscope="" itemtype="https://schema.org/ImageObject" itemprop="image"><meta itemprop="contentUrl" content="https://y0c.github.io/images/monorepo.png"><meta itemprop="url" content="https://y0c.github.io/images/monorepo.png"><meta itemprop="width"><meta itemprop="height"></div></article><section class="related-posts"><h3>Related posts</h3><div class="related-posts__item__wrapper"><a class="related-posts__item" href="/2018/09/10/js-closure/"><div class="related-posts__item__background" style="background-image:url('/images/js.png');"></div><div class="related-posts__item__overlay"></div><span class="related-posts__item__title">Javascript Closureë€?</span></a></div><div class="related-posts__item__wrapper"><a class="related-posts__item" href="/2018/08/10/js-decorator/"><div class="related-posts__item__background" style="background-image:url('/images/js.png');"></div><div class="related-posts__item__overlay"></div><span class="related-posts__item__title">Javascript Decorator Pattern</span></a></div><div class="related-posts__item__wrapper"><a class="related-posts__item" href="/2019/04/11/testing-refactoring/"><div class="related-posts__item__background" style="background-image:url('/images/banner.png');"></div><div class="related-posts__item__overlay"></div><span class="related-posts__item__title">Testing &amp; Refactoring</span></a></div></section></div></div></div><footer id="footer"><div class="widgets"><div class="widgets-inner"><!-- Jade doesn't support dynamic inclusion with `each`.--><!-- So, I just hard coded the file names that will be included.--><div class="widgets__item"><h3 class="widgets__item__heading">Recent posts</h3><ul class="recent-posts"><li class="recent-posts__item"><a href="/2019/11/24/graphql-query-optimize-with-dataloader/">GrpahQL DataLoaderë¥¼ ì´ìš©í•œ ì„±ëŠ¥ ìµœì í™”</a></li><li class="recent-posts__item"><a href="/2019/11/17/graphql-data-mocking/">GraphQL Data Mocking</a></li><li class="recent-posts__item"><a href="/2019/08/25/go-lambda-develop-notify-service/">Golangê³¼ Lambdaë¥¼ í™œìš©í•œ ì•Œë¦¼ ì„œë¹„ìŠ¤ ê°œë°œê¸°</a></li><li class="recent-posts__item"><a href="/2019/08/11/beginning-go/">TDDë¡œ Golang ì‹œì‘í•˜ê¸°</a></li><li class="recent-posts__item"><a href="/2019/07/14/vim-config-for-js-developer/">Vim Configuration ì •ë¦¬</a></li></ul></div><div class="widgets__item"><h3 class="widgets__item__heading">Archives</h3><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">2</span></li></ul></div><div class="widgets__item"><h3 class="widgets__item__heading">Categories</h3><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Go/">Go</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Javascript/">Javascript</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/React/">React</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Redis/">Redis</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tmux/">Tmux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/graphql/">graphql</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/serverless/">serverless</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/vim/">vim</a><span class="category-list-count">1</span></li></ul></div></div></div><p class="copyright"><small>Â© 2019 hosung<br>Powered by <a href="https://hexo.io" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a>, Theme by <a href="https://github.com/hyunseob" rel="external nofollow noopener noreferrer" target="_blank">HyunSeob</a></small></p></footer><script src="/js/sharer.min.js"></script></body></html>