<!DOCTYPE html><html><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>React Infinite scroll êµ¬í˜„í•˜ê¸° | y0c</title><link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/css/highlights/dracula.css"><link rel="canonical" href="https://y0c.github.io/2019/06/30/react-infinite-scroll/">
<meta name="description" content="Reactë¡œ Infinite scrollì„ êµ¬í˜„í•˜ë©´ì„œ ì •ë¦¬í•œ ê¸€ì´ë‹¤.  Infinite scroll?Infinite scrollì€ í•œ ë²ˆì— ëª¨ë“  ì»¨í…ì¸ ë¥¼ ë Œë”ë§ í•˜ì§€ ì•Šê³  í˜ì´ì§€ ë‚´ìš©ì„ ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤í•˜ë©´ ìƒˆë¡œìš´ ì»¨í…ì¸ ë¥¼ ë§ë¶™ì—¬ì„œ ë Œë”ë§ í•˜ëŠ”â€¦">
<meta name="keywords" content="React">
<meta property="og:type" content="article">
<meta property="og:title" content="React Infinite scroll êµ¬í˜„í•˜ê¸°">
<meta property="og:url" content="https://y0c.github.io/2019/06/30/react-infinite-scroll/">
<meta property="og:site_name" content="y0c">
<meta property="og:description" content="Reactë¡œ Infinite scrollì„ êµ¬í˜„í•˜ë©´ì„œ ì •ë¦¬í•œ ê¸€ì´ë‹¤.  Infinite scroll?Infinite scrollì€ í•œ ë²ˆì— ëª¨ë“  ì»¨í…ì¸ ë¥¼ ë Œë”ë§ í•˜ì§€ ì•Šê³  í˜ì´ì§€ ë‚´ìš©ì„ ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤í•˜ë©´ ìƒˆë¡œìš´ ì»¨í…ì¸ ë¥¼ ë§ë¶™ì—¬ì„œ ë Œë”ë§ í•˜ëŠ”â€¦">
<meta property="og:image" content="https://y0c.github.io/images/react-infinite-scroll.png">
<meta property="og:updated_time" content="2019-06-30T10:33:11.241Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="React Infinite scroll êµ¬í˜„í•˜ê¸°">
<meta name="twitter:description" content="Reactë¡œ Infinite scrollì„ êµ¬í˜„í•˜ë©´ì„œ ì •ë¦¬í•œ ê¸€ì´ë‹¤.  Infinite scroll?Infinite scrollì€ í•œ ë²ˆì— ëª¨ë“  ì»¨í…ì¸ ë¥¼ ë Œë”ë§ í•˜ì§€ ì•Šê³  í˜ì´ì§€ ë‚´ìš©ì„ ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤í•˜ë©´ ìƒˆë¡œìš´ ì»¨í…ì¸ ë¥¼ ë§ë¶™ì—¬ì„œ ë Œë”ë§ í•˜ëŠ”â€¦">
<meta name="twitter:image" content="https://y0c.github.io/images/react-infinite-scroll.png"><meta property="article:author" content="hosung"><meta property="twitter:label1" content="Published at"><meta property="twitter:data1" content="2019-06-30 16:00:05"><meta property="twitter:label2" content="Written by"><meta property="twitter:data2" content="hosung"><link rel="icon" href="/images/logo.png"><link rel="alternate" href="/feed.xml" type="application/atom+xml" title="y0c"><script>(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-112029921-1', 'auto');
ga('send', 'pageview');</script></head><body itemscope="" itemtype="https://schema.org/WebPage"><nav class="menu" id="menu"><div class="menu-inner"><div class="menu__left-area"><div class="menu__item"><a class="menu__item__link menu__item__link--brand" href="/" title="Home" rel="home"><img class="menu__item__link--brand__image" src="/images/logo.png" alt="y0c"><span class="menu__item__link--brand__label">y0c</span></a></div></div><div class="menu__right-area"><div class="menu__item"><a class="menu__item__link" href="/">Home</a></div><div class="menu__item"><a class="menu__item__link" href="/archives">Archives</a></div></div></div></nav><div class="page-background"></div><div class="content-container"><div class="content-outer"><div class="content-inner" itemscope="" itemtype="https://schema.org/Blog"><article class="article" id="article" itemscope="" itemtype="https://schema.org/BlogPosting"><h1 class="article__title" itemprop="headline">React Infinite scroll êµ¬í˜„í•˜ê¸°</h1><div class="article__meta"><time class="article__meta__time" datetime="2019-06-30T07:00:05.000Z" itemprop="datePublished">2019-06-30 16:00:05</time><div class="article__meta__categories"><a class="article__meta__categories__item" href="/categories/React/">React</a></div></div><div class="article__contents"><img src="/images/react-infinite-scroll.png"><p>Reactë¡œ Infinite scrollì„ êµ¬í˜„í•˜ë©´ì„œ ì •ë¦¬í•œ ê¸€ì´ë‹¤. </p>
<h2 id="Infinite-scroll"><a href="#Infinite-scroll" class="headerlink" title="Infinite scroll?"></a>Infinite scroll?</h2><p>Infinite scrollì€ í•œ ë²ˆì— ëª¨ë“  ì»¨í…ì¸ ë¥¼ ë Œë”ë§ í•˜ì§€ ì•Šê³  í˜ì´ì§€ ë‚´ìš©ì„ ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤í•˜ë©´ ìƒˆë¡œìš´ ì»¨í…ì¸ ë¥¼ ë§ë¶™ì—¬ì„œ ë Œë”ë§ í•˜ëŠ” ë°©ì‹ì´ë‹¤. ë¡œë”©í•´ì•¼í•  ì»¨í…ì¸ ì˜ ì–‘ì´ ë§ë‹¤ë©´ í¼í¬ë¨¼ìŠ¤ ì¸¡ë©´ì—ì„œ infinite scrollì„ ê³ ë ¤í•´ ë³¼ ìˆ˜ ìˆë‹¤. í˜ì´ìŠ¤ë¶ í˜¹ì€ íŠ¸ìœ„í„°ì™€ ê°™ì€ ì‚¬ì´íŠ¸ë¥¼ ë³´ë©´ ì´ì™€ ê°™ì€ UIë¥¼ ì ê·¹ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê³  ìˆë‹¤. </p>
<h2 id="êµ¬í˜„-ë°©ë²•"><a href="#êµ¬í˜„-ë°©ë²•" class="headerlink" title="êµ¬í˜„ ë°©ë²•"></a>êµ¬í˜„ ë°©ë²•</h2><p>Infinite Scrollì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì—ëŠ” í¬ê²Œ ë‘ ê°€ì§€ê°€ ìˆë‹¤. </p>
<ul>
<li>onScroll event</li>
<li>Intersection Observer API</li>
</ul>
<h3 id="onScroll-event"><a href="#onScroll-event" class="headerlink" title="onScroll event"></a>onScroll event</h3><p>onScroll eventë¥¼ ì´ìš©í•œ ë°©ë²•ì€ ê°€ì¥ ë¨¼ì € ìƒê°í•´ ë³¼ ìˆ˜ ìˆëŠ” ë°©ë²•ì´ë‹¤. ì‚¬ìš©ìê°€ scrollì„ í•  ë•Œ ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ê³  í˜„ì¬ scroll ìœ„ì¹˜ê°€ í˜ì´ì§€ì— ëì— ë‹¿ì•˜ëŠ”ì§€ íŒë‹¨í•œë‹¤. í˜ì´ì§€ ëì— ë„ë‹¬í–ˆë‹¤ë©´ ìƒˆë¡œìš´ ì»¨í…ì¸ ë¥¼ ë¡œë”©í•˜ê¸° ìœ„í•œ ìš”ì²­ì„ í•˜ê³  ì»¨í…ì¸ ë¥¼ ë§ë¶™ì´ëŠ” ë°©ì‹ì´ë‹¤. í•˜ì§€ë§Œ scroll ì´ë²¤íŠ¸ëŠ” êµ‰ì¥íˆ ë¹ˆë²ˆí•˜ê²Œ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•´ì„œ <code>throttle</code>ê³¼ ê°™ì€ ì²˜ë¦¬ê°€ í•„ìš”í•˜ë‹¤. </p>
<h3 id="Intersection-Observer-API"><a href="#Intersection-Observer-API" class="headerlink" title="Intersection Observer API"></a>Intersection Observer API</h3><p>Intersection ObserverëŠ” MDN ì—ì„œ ì•„ë˜ì™€ ê°™ì´ ì„¤ëª…í•œë‹¤. </p>
<blockquote>
<p>êµì°¨ ì˜ì—­ ê´€ì°°ì APIëŠ” ì¡°ìƒ ì—˜ë¦¬ë¨¼íŠ¸ ë˜ëŠ” ìµœìƒìœ„ ë„íë¨¼íŠ¸ ë·°í¬íŠ¸ì™€ ëŒ€ìƒ ì—˜ë¦¬ë¨¼íŠ¸ì˜ êµì°¨ ì˜ì—­ì—ì„œ ë°œìƒí•œ ë³€ê²½ ì‚¬í•­ì„ ë¹„ë™ê¸°ì ìœ¼ë¡œ ê°ì‹œí•˜ëŠ” ë°©ë²•ì„ ì œê³µí•œë‹¤.</p>
</blockquote>
<p>ìœ„ ì •ì˜ë§Œ ì½ì–´ë³´ë©´ ë§ì´ ì–´ë ¤ìš¸ ìˆ˜ ìˆëŠ”ë° ë‹¨ìˆœí•˜ê²Œ DOM ì—˜ë¦¬ë¨¼íŠ¸ ê°„ì— ì˜ì—­ì´ ê²¹ì³ì§€ëŠ”ê±¸ ê°ì‹œí•œë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤. </p>
<p>Intersection Observer APIë¥¼ ì‚¬ìš©í•˜ë©´ scroll, resizeì™€ ê°™ì€ ë¹„ì‹¼ ë¹„ìš©ì˜ ì´ë²¤íŠ¸ë¥¼ ì¢€ ë” ì‰½ê³  ì¢‹ì€ í¼í¬ë¨¼ìŠ¤ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. Lazy-load, infinite scroll ê³¼ ê°™ì€ ê²ƒë“¤ì„ êµ¬í˜„í• ë•Œ ìœ ìš©í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. scroll ì´ë²¤íŠ¸ì— ë¹„í•´ ë‹¨ì ì´ë¼ë©´ ì•„ì§ ëª¨ë“  ë¸Œë¼ìš°ì €ì—ì„œ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì´ë‹¤. </p>
<p>ì´ ê¸€ì—ì„  IntersectionObserver ì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…ì€ í•˜ì§€ ì•ŠëŠ”ë‹¤. ë” í•„ìš”í•œ ì •ë³´ëŠ” ì•„ë˜ ë§í¬ë¥¼ ì°¸ê³ í•˜ë„ë¡ í•˜ì. </p>
<p><a href="https://velog.io/@doondoony/IntersectionObserver" rel="external nofollow noopener noreferrer" target="_blank">https://velog.io/@doondoony/IntersectionObserver</a></p>
<p>ì‚¬ì‹¤ ë¸Œë¼ìš°ì € ì§€ì›ê³¼ íŠ¹ìˆ˜í•œ ìƒí™©ì„ ì œì™¸í•˜ê³¤ Intersection Observer APIê°€ êµ¬í˜„í•˜ê¸° í¸ë¦¬í•˜ê¸° ë•Œë¬¸ì— ì´ ë°©ë²•ì„ í†µí•´ì„œ Infinite scrollì„ êµ¬í˜„í•˜ì˜€ë‹¤. </p>
<h2 id="Reactë¥¼-í†µí•œ-êµ¬í˜„"><a href="#Reactë¥¼-í†µí•œ-êµ¬í˜„" class="headerlink" title="Reactë¥¼ í†µí•œ êµ¬í˜„"></a>Reactë¥¼ í†µí•œ êµ¬í˜„</h2><p>êµ¬í˜„í•˜ë ¤ê³  í–ˆë˜ ê²ƒì€ Unsplash APIë¥¼ í†µí•´ì„œ ì´ë¯¸ì§€ë¥¼ ê²€ìƒ‰í•˜ê³  ê²°ê³¼ë¥¼ Infinite scroll ì„ í†µí•´ ë³´ì—¬ì£¼ëŠ” ê²ƒì´ì˜€ë‹¤. </p>
<h3 id="Component-êµ¬ì¡°"><a href="#Component-êµ¬ì¡°" class="headerlink" title="Component êµ¬ì¡°"></a>Component êµ¬ì¡°</h3><p>ê°€ì¥ ë¨¼ì € í–ˆë˜ ì‘ì—…ì€ Component êµ¬ì¡°ë¥¼ ì¡ëŠ” ê²ƒ ì´ì˜€ë‹¤.<br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> UnsplashContainer = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;SearchForm</span><br><span class="line">        onSearch=&#123;searchImage&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">      &lt;ScrollContainer</span><br><span class="line">        height=&#123;<span class="number">400</span>&#125;</span><br><span class="line">        vertical</span><br><span class="line">        ref=&#123;rootRef&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;ThumbnailList</span><br><span class="line">          thumbnails=&#123;images&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">        &lt;Loading show=&#123;loading&#125;/&gt;</span><br><span class="line">        &lt;div ref=&#123;targetRef&#125; /&gt;</span><br><span class="line">      &lt;<span class="regexp">/ScrollContainer&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°ëŠ” scroll ê°€ëŠ¥í•œ divë¥¼ ì…‹íŒ…í•´ë‘ê³  ê·¸ ì•„ë˜ì— ì»¨í…ì¸  ëª©ë¡, ë¡œë”© ì»´í¬ë„ŒíŠ¸ ê·¸ë¦¬ê³  ë§ˆì§€ë§‰ìœ¼ë¡œ IntersectionObserver ë¥¼ í™œìš©í•´ì„œ í˜ì´ì§€ ëì„ ê°ì§€í•˜ê¸° ìœ„í•´ ë¹ˆ divë¥¼ ì¶”ê°€í•˜ì˜€ë‹¤. </p>
<h3 id="React-State"><a href="#React-State" class="headerlink" title="React State"></a>React State</h3><p>ì´ì œ Componentì—ì„œ í•„ìš”í•œ ë³€ìˆ˜, ìƒíƒœ, refë¥¼ ì¶”ê°€í•´ì•¼ í•œë‹¤.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// instance variable</span></span><br><span class="line"><span class="keyword">const</span> currentPage = useRef(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">const</span> totalPage = useRef(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// request state</span></span><br><span class="line"><span class="keyword">const</span> [loading, setLoading] = useState(<span class="literal">false</span>);</span><br><span class="line"><span class="keyword">const</span> [error, setError] = useState(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// contents list</span></span><br><span class="line"><span class="keyword">const</span> [images, setImages] = useState([]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ref</span></span><br><span class="line"><span class="keyword">const</span> rootRef = useRef(<span class="literal">null</span>);</span><br><span class="line"><span class="keyword">const</span> targetRef = useRef(<span class="literal">null</span>);</span><br></pre></td></tr></table></figure></p>
<p>currentPageì™€ totalPageëŠ” stateë¡œ ê´€ë¦¬í•  í•„ìš”ëŠ” ì—†ì—ˆê¸° ë•Œë¬¸ì— Refë¡œ ì¶”ê°€í•˜ì˜€ë‹¤.<br>(React Hooksì—ì„œ useRefëŠ” ì´ì „ê°’ì„ ì €ì¥í•˜ê±°ë‚˜ class componentì˜ ë©¤ë²„ ë³€ìˆ˜ì™€ ê°™ì´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.)<br>rootRefì™€ targetRefëŠ” IntersectionObserverì—ì„œ ì‚¬ìš©í•  ì‹¤ì œ DOM ë…¸ë“œë“¤ì´ë‹¤. </p>
<h3 id="Data-Fetching"><a href="#Data-Fetching" class="headerlink" title="Data Fetching"></a>Data Fetching</h3><p>Data Fetchingì„ ìœ„í•œ í•¨ìˆ˜ë¥¼ ëª‡ê°€ì§€ ì •ì˜í•œë‹¤. </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> loadImage = useCallback(<span class="keyword">async</span> (&#123; query, page &#125;) =&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      setLoading(<span class="literal">true</span>);</span><br><span class="line">      <span class="keyword">const</span> data = <span class="keyword">await</span> UnsplashAPI.searchPhotos(&#123; query, page, <span class="attr">per_page</span>: PER_PAGE&#125;);</span><br><span class="line">      totalPage.current = data.total_pages;</span><br><span class="line">      <span class="keyword">return</span> data;</span><br><span class="line">    &#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">      setError(e);</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      setLoading(<span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, []);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> searchImage = useCallback(<span class="keyword">async</span> (query) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span>(!query) &#123;</span><br><span class="line">    <span class="keyword">await</span> loadRandomImage();</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  currentQuery.current = query;</span><br><span class="line">  currentPage.current = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">await</span> loadImage(&#123; query, <span class="attr">page</span>: <span class="number">1</span>, <span class="attr">per_page</span>: PER_PAGE &#125;);</span><br><span class="line">  setImages(data.results);</span><br><span class="line">&#125;, [loadImage, loadRandomImage]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> loadMoreImage = useCallback(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span>(images.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    currentPage.current++;</span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">await</span> loadImage(&#123;</span><br><span class="line">      query: currentQuery.current,</span><br><span class="line">      page: currentPage.current</span><br><span class="line">    &#125;);</span><br><span class="line">    setImages([...images, ...data.results])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,[images, loadImage]);</span><br></pre></td></tr></table></figure>
<p>loadImageëŠ” Unsplash APIë¥¼ í†µí•´ì„œ Dataë¥¼ ê°€ì ¸ì˜¤ê³  loadingê³¼ error ìƒíƒœë¥¼ ì œì–´í•œë‹¤. searchImageëŠ” ë§¨ ì²˜ìŒ ë°ì´í„° ìš”ì²­ì—ë§Œ ì‚¬ìš©í•œë‹¤. í¼ì—ì„œ ê²€ìƒ‰ì„ ì‹¤í–‰í•˜ë©´ ì´ í•¨ìˆ˜ê°€ í˜¸ì¶œëœë‹¤. loadMoreImage í•¨ìˆ˜ëŠ” ìŠ¤í¬ë¡¤ì´ ëì— ë‹¿ì•˜ì„ë•Œ í˜¸ì¶œëœë‹¤. ì—¬ê¸°ì„  í˜ì´ì§€ê°’ì„ ì¦ê°€ì‹œí‚¤ê³  ì»¨í…ì¸  ë’¤ìª½ìœ¼ë¡œ ìƒˆë¡œìš´ ì»¨í…ì¸ ë¥¼ ë¶™ì—¬ì£¼ë©´ ëœë‹¤. </p>
<p>(<code>useAsyncFn</code> hookì„ ì‚¬ìš©í•˜ë©´ loading, errorë¥¼ ì¢€ ë” ê¹”ë”í•˜ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤. <code>react-use</code> íŒ¨í‚¤ì§€ì—ì„œ ì‚¬ìš©í•˜ê±°ë‚˜ í˜¹ì€ êµ¬í˜„í•´ë„ ë¬´ê´€í•˜ë‹¤.)</p>
<h3 id="IntersectionObserver-hook"><a href="#IntersectionObserver-hook" class="headerlink" title="IntersectionObserver hook"></a>IntersectionObserver hook</h3><p>IntersectionObserverë¥¼ ì„¤ì •í•´ì¤€ë‹¤. ì´ ë¶€ë¶„ì€ ê²€ìƒ‰í•´ë³´ë©´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë„ ë§ê³  ì¼ë°˜ì ì¸ ì˜ˆì œë“¤ë„ ë§ì´ ìˆë‹¤. ìƒí™©ì— ë§ì¶°ì„œ ì‚¬ìš©í•˜ë©´ ë  ê²ƒ ê°™ë‹¤. ë‚˜ëŠ” ë‹¤ë¥¸ ì½”ë“œë¥¼ ì°¸ê³ í•´ì„œ custom hookì„ ì¶”ê°€í–ˆë‹¤. </p>
<p><code>useIntersectionObserver.jsx</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (&#123; root, target, onIntersect, threshold = <span class="number">1.0</span>, rootMargin = <span class="string">"0px"</span> &#125;) =&gt; &#123;</span><br><span class="line">  useEffect(</span><br><span class="line">    () =&gt; &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (!root) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> observer = <span class="keyword">new</span> IntersectionObserver(onIntersect, &#123;</span><br><span class="line">        root,</span><br><span class="line">        rootMargin,</span><br><span class="line">        threshold,</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (!target) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      observer.observe(target);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        observer.unobserve(target);</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;, [target, root, rootMargin, onIntersect, threshold]</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>root, threshold, rootMarginì€ IntersectionObserverì˜ ì˜µì…˜ë“¤ì´ê³  targetì€ êµì°¨ì— ëŒ€í•´ì„œ ê°ì‹œí•  element ì´ë‹¤. onIntersectëŠ” IntersectionObserverì˜ callbackì´ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤. </p>
<p>ìœ„ ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°ì—ì„œ rootëŠ” ScrollContainerë¡œ targetì€ ë§¨ëì— ë¹ˆ divë¡œ ì„¤ì •í•˜ì˜€ë‹¤. onIntersect ì—ì„œ ëª‡ê°€ì§€ ì¡°ê±´ì— ë§ì¶°ì„œ loadMoreImageë¥¼ í˜¸ì¶œí•´ì£¼ë©´ infinite scrollì´ ì™„ì„±ëœë‹¤. </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">useIntersectionObserver(&#123;</span><br><span class="line">  root: rootRef.current,</span><br><span class="line">  target: targetRef.current,</span><br><span class="line">  onIntersect: <span class="function">(<span class="params">[&#123;isIntersecting&#125;]</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(</span><br><span class="line">      isIntersecting &amp;&amp;</span><br><span class="line">      !loading &amp;&amp;</span><br><span class="line">      currentPage.current &lt; totalPage.current</span><br><span class="line">    ) &#123;</span><br><span class="line">      loadMoreImage();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>ë‚˜ëŠ” ìœ„ì™€ ê°™ì€ ì¡°ê±´ì„ ì¶”ê°€í•´ì„œ êµ¬í˜„í–ˆë‹¤. ë¡œë”©ì¤‘ì´ê±°ë‚˜ ë§ˆì§€ë§‰ í˜ì´ì§€ê°€ ì•„ë‹ë•Œ í˜ì´ì§€ëì— ë‹¿ìœ¼ë©´ ì¶”ê°€ë¡œ ë¡œë”©í•˜ëŠ” ë¡œì§ì´ë‹¤. </p>
<h2 id="êµ¬í˜„-í™”ë©´"><a href="#êµ¬í˜„-í™”ë©´" class="headerlink" title="êµ¬í˜„ í™”ë©´"></a>êµ¬í˜„ í™”ë©´</h2><img src="/2019/06/30/react-infinite-scroll/infinite_scroll.gif" title="êµ¬í˜„í™”ë©´">
<p>ì´ í”„ë¡œì íŠ¸ëŠ” ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ ë°°ë„ˆë¥¼ ìƒì„±í•´ì£¼ëŠ” <a href="https://github.com/banner-maker/banner-maker" rel="external nofollow noopener noreferrer" target="_blank">banner-maker</a> ë¼ëŠ” í”„ë¡œì íŠ¸ì´ë‹¤.<br>Unsplash Imageë¥¼ ë°°ê²½ìœ¼ë¡œ í™œìš©í•  ìˆ˜ ìˆë„ë¡ ê¸°ëŠ¥ì„ ì¶”ê°€í•´ì„œ ê¸°ì—¬í•´ ë³´ì•˜ë‹¤. </p>
<h2 id="ë§ˆë¬´ë¦¬"><a href="#ë§ˆë¬´ë¦¬" class="headerlink" title="ë§ˆë¬´ë¦¬"></a>ë§ˆë¬´ë¦¬</h2><p>scroll eventë¥¼ í™œìš©í•´ì„œ êµ¬í˜„í•˜ëŠ” ê²ƒ ë³´ë‹¤  IntersectionObserverë¥¼ ì´ìš©í•˜ë©´ ì¢€ ë” ì†ì‰½ê²Œ infinite scrollì„ êµ¬í˜„í•  ìˆ˜ ìˆì—ˆë‹¤. IntersectionObserverì˜ ë¸Œë¼ìš°ì € ì§€ì›í˜„í™©ì´ ê±¸ë¦°ë‹¤ë©´ polyfillì„ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ ì™„ë²½í•˜ì§„ ì•Šì€ ê²ƒ ê°™ë‹¤. </p>
<h2 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h2><ul>
<li><a href="https://velog.io/@doondoony/IntersectionObserver" rel="external nofollow noopener noreferrer" target="_blank">https://velog.io/@doondoony/IntersectionObserver</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API" rel="external nofollow noopener noreferrer" target="_blank">https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API</a></li>
<li><a href="https://github.com/streamich/react-use" rel="external nofollow noopener noreferrer" target="_blank">https://github.com/streamich/react-use</a></li>
</ul>
</div><div class="article__tags"><a class="article__tags__item" href="/tags/React/">React</a></div><div class="article__author" itemscope="" itemprop="author" itemtype="https://schema.org/Person"><img class="article__author__image" src="/images/profile.jpg" alt="hosung"><a class="article__author__link" title="About hosung" rel="author">hosung</a><p class="article__author__desc">ğŸ”¥ Typescript</p><div class="article__author__socials"><a class="article__author__socials__item" href="http://github.com/y0c" title="github" target="_blank" rel="external nofollow noopener noreferrer"><i class="fa fa-github"></i></a><a class="article__author__socials__item" href="/feed.xml" title="rss" target="_blank"><i class="fa fa-rss"></i></a></div><meta itemprop="name" content="hosung"></div><div class="sharer" id="sharer"><div class="sharer-inner"><div class="sharer__right"><button class="sharer__item" id="sharer-facebook"><i class="fa fa-facebook-official"></i></button><button class="sharer__item" id="sharer-twitter"><i class="fa fa-twitter"></i></button><button class="sharer__item" id="sharer-pinterest"><i class="fa fa-pinterest"></i></button><button class="sharer__item" id="sharer-pocket"><i class="fa fa-get-pocket"></i></button></div></div></div><!-- Disqus Code--><div id="disqus_thread"></div><script>(function() {
  var d = document, s = d.createElement('script');
  s.src = '//lazy-developer.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
})();</script><noscript>Enable JavaScript to see comments.</noscript><!-- Meta Tags for Structured Data--><meta itemprop="dateModified" content="2019-06-30T10:33:11.241Z"><meta itemprop="articleBody" content="Reactë¡œ Infinite scrollì„ êµ¬í˜„í•˜ë©´ì„œ ì •ë¦¬í•œ ê¸€ì´ë‹¤. 
Infinite scroll?Infinite scrollì€ í•œ ë²ˆì— ëª¨ë“  ì»¨í…ì¸ ë¥¼ ë Œë”ë§ í•˜ì§€ ì•Šê³  í˜ì´ì§€ ë‚´ìš©ì„ ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤í•˜ë©´ ìƒˆë¡œìš´ ì»¨í…ì¸ ë¥¼ ë§ë¶™ì—¬ì„œ ë Œë”ë§ í•˜ëŠ” ë°©ì‹ì´ë‹¤. ë¡œë”©í•´ì•¼í•  ì»¨í…ì¸ ì˜ ì–‘ì´ ë§ë‹¤ë©´ í¼í¬ë¨¼ìŠ¤ ì¸¡ë©´ì—ì„œ infinite scrollì„ ê³ ë ¤í•´ ë³¼ ìˆ˜..."><meta itemprop="url" content="https://y0c.github.io/2019/06/30/react-infinite-scroll/"><meta itemprop="mainEntityOfPage" content="https://y0c.github.io/2019/06/30/react-infinite-scroll/"><div itemscope="" itemtype="https://schema.org/Organization" itemprop="publisher"><meta itemprop="name" content="y0c"><div itemscope="" itemprop="logo" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://y0c.github.io/images/logo.png"></div></div><div itemscope="" itemtype="https://schema.org/ImageObject" itemprop="image"><meta itemprop="contentUrl" content="https://y0c.github.io/images/react-infinite-scroll.png"><meta itemprop="url" content="https://y0c.github.io/images/react-infinite-scroll.png"><meta itemprop="width"><meta itemprop="height"></div></article><section class="related-posts"><h3>Related posts</h3><div class="related-posts__item__wrapper"><a class="related-posts__item" href="/2018/01/06/React-Component-ìƒëª…ì£¼ê¸°/"><div class="related-posts__item__background" style="background-image:url('/images/react.jpg');"></div><div class="related-posts__item__overlay"></div><span class="related-posts__item__title">React Component ìƒëª…ì£¼ê¸°</span></a></div><div class="related-posts__item__wrapper"><a class="related-posts__item" href="/2018/01/03/React-Event-Handling/"><div class="related-posts__item__background" style="background-image:url('/images/react.jpg');"></div><div class="related-posts__item__overlay"></div><span class="related-posts__item__title">React Event Handling</span></a></div><div class="related-posts__item__wrapper"><a class="related-posts__item" href="/2018/09/10/semantic-ui-react-theme/"><div class="related-posts__item__background" style="background-image:url('/images/react.jpg');"></div><div class="related-posts__item__overlay"></div><span class="related-posts__item__title">Semantic-Ui-React Theme Customizing</span></a></div></section></div></div></div><footer id="footer"><div class="widgets"><div class="widgets-inner"><!-- Jade doesn't support dynamic inclusion with `each`.--><!-- So, I just hard coded the file names that will be included.--><div class="widgets__item"><h3 class="widgets__item__heading">Recent posts</h3><ul class="recent-posts"><li class="recent-posts__item"><a href="/2019/06/30/react-infinite-scroll/">React Infinite scroll êµ¬í˜„í•˜ê¸°</a></li><li class="recent-posts__item"><a href="/2019/06/14/monorepo-tutorial/">ğŸ“¦ Monorepo Tutorial</a></li><li class="recent-posts__item"><a href="/2019/04/11/testing-refactoring/">Testing &amp; Refactoring</a></li><li class="recent-posts__item"><a href="/2018/10/22/jenkins-docker-tomcat/">Jenkins x Docker Tomcat War ë°°í¬í•˜ê¸°</a></li><li class="recent-posts__item"><a href="/2018/10/21/redis-cluster/">Redis Cluster êµ¬ì¶•í•˜ê¸°</a></li></ul></div><div class="widgets__item"><h3 class="widgets__item__heading">Archives</h3><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">2</span></li></ul></div><div class="widgets__item"><h3 class="widgets__item__heading">Categories</h3><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Javascript/">Javascript</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/React/">React</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Redis/">Redis</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tmux/">Tmux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/serverless/">serverless</a><span class="category-list-count">1</span></li></ul></div></div></div><p class="copyright"><small>Â© 2019 hosung<br>Powered by <a href="https://hexo.io" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a>, Theme by <a href="https://github.com/hyunseob" rel="external nofollow noopener noreferrer" target="_blank">HyunSeob</a></small></p></footer><script src="/js/sharer.min.js"></script></body></html>