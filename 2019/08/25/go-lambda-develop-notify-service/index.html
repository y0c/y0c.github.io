<!DOCTYPE html><html><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Golang과 Lambda를 활용한 알림 서비스 개발기 | y0c</title><link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/css/highlights/dracula.css"><link rel="canonical" href="https://y0c.github.io/2019/08/25/go-lambda-develop-notify-service/">
<meta name="description" content="평소에 Festa 라는 이벤트 플랫폼을 가끔씩 이용하는 편이다. 이 서비스에는 내가 관심있는 IT 관련 세미나 혹은 해커톤과 같은 밋업이 종종 올라오곤 한다. 보통은 페이스북 그룹에 공유된 글을 통해서 혹은 지인들을 통해서 알게됬는데 그럼에도…">
<meta name="keywords" content="Go,Lambda,SES,Serverless">
<meta property="og:type" content="article">
<meta property="og:title" content="Golang과 Lambda를 활용한 알림 서비스 개발기">
<meta property="og:url" content="https://y0c.github.io/2019/08/25/go-lambda-develop-notify-service/">
<meta property="og:site_name" content="y0c">
<meta property="og:description" content="평소에 Festa 라는 이벤트 플랫폼을 가끔씩 이용하는 편이다. 이 서비스에는 내가 관심있는 IT 관련 세미나 혹은 해커톤과 같은 밋업이 종종 올라오곤 한다. 보통은 페이스북 그룹에 공유된 글을 통해서 혹은 지인들을 통해서 알게됬는데 그럼에도…">
<meta property="og:image" content="https://y0c.github.io/images/go_lambda.png">
<meta property="og:updated_time" content="2019-08-25T15:24:06.422Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Golang과 Lambda를 활용한 알림 서비스 개발기">
<meta name="twitter:description" content="평소에 Festa 라는 이벤트 플랫폼을 가끔씩 이용하는 편이다. 이 서비스에는 내가 관심있는 IT 관련 세미나 혹은 해커톤과 같은 밋업이 종종 올라오곤 한다. 보통은 페이스북 그룹에 공유된 글을 통해서 혹은 지인들을 통해서 알게됬는데 그럼에도…">
<meta name="twitter:image" content="https://y0c.github.io/images/go_lambda.png"><meta property="article:author" content="hosung"><meta property="twitter:label1" content="Published at"><meta property="twitter:data1" content="2019-08-25 20:43:06"><meta property="twitter:label2" content="Written by"><meta property="twitter:data2" content="hosung"><link rel="icon" href="/images/logo.png"><link rel="alternate" href="/feed.xml" type="application/atom+xml" title="y0c"><script>(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-112029921-1', 'auto');
ga('send', 'pageview');</script></head><body itemscope="" itemtype="https://schema.org/WebPage"><nav class="menu" id="menu"><div class="menu-inner"><div class="menu__left-area"><div class="menu__item"><a class="menu__item__link menu__item__link--brand" href="/" title="Home" rel="home"><img class="menu__item__link--brand__image" src="/images/logo.png" alt="y0c"><span class="menu__item__link--brand__label">y0c</span></a></div></div><div class="menu__right-area"><div class="menu__item"><a class="menu__item__link" href="/">Home</a></div><div class="menu__item"><a class="menu__item__link" href="/archives">Archives</a></div></div></div></nav><div class="page-background"></div><div class="content-container"><div class="content-outer"><div class="content-inner" itemscope="" itemtype="https://schema.org/Blog"><article class="article" id="article" itemscope="" itemtype="https://schema.org/BlogPosting"><h1 class="article__title" itemprop="headline">Golang과 Lambda를 활용한 알림 서비스 개발기</h1><div class="article__meta"><time class="article__meta__time" datetime="2019-08-25T11:43:06.000Z" itemprop="datePublished">2019-08-25 20:43:06</time><div class="article__meta__categories"><a class="article__meta__categories__item" href="/categories/Go/">Go</a></div></div><div class="article__contents"><img src="/images/go_lambda.png"><p>평소에 <a href="https://festa.io" rel="external nofollow noopener noreferrer" target="_blank">Festa</a> 라는 이벤트 플랫폼을 가끔씩 이용하는 편이다. 이 서비스에는 내가 관심있는 IT 관련 세미나 혹은 해커톤과 같은 밋업이 종종 올라오곤 한다. 보통은 페이스북 그룹에 공유된 글을 통해서 혹은 지인들을 통해서 알게됬는데 그럼에도 놓치는 것들이 있었다. 이번에 하던일이 끝나고 시간이 좀 남아서 Festa에 최신 이벤트에 대해서 메일로 알림을 해주는 서비스를 개발해보았다. </p>
<p>이 글에선 Golang과 AWS Lambda를 활용해서 알림 서비스를 개발한 것 에대해서 정리해보려고 한다. </p>
<h2 id="구상"><a href="#구상" class="headerlink" title="구상"></a>구상</h2><p>처음에 했던 작업은 알림에 대한 아이디어 구상이였다. Festa에서는 이벤트에 대한 카테고리나 태그에 대해서 제공하지 않았다. 새로은 이벤트에 대해서 모두 알림을 받는 방법도 생각해봤지만 생각보다 개발과 관련없는 이벤트도 많이 올라왔다. 고민중에 주변에서 피드백을 받아 키워드를 통해서 필터링하는 방법을 선택했다. 아래 그림을 보면 이벤트에는 제목과 주최한 Host에 대한 정보가 있다. 특정 키워드를 등록해놓고 해당 키워드에 매칭된다면 메일로 알림을 해주는 방식이다.</p>
<p>키워드 Exmaple : <code>GDG</code>, <code>해커톤</code></p>
<img src="/2019/08/25/go-lambda-develop-notify-service/event.png" title="Festa Events">
<p>(Festa 사이트 events 페이지 참고)</p>
<p>키워드를 사용하는 방법도 완벽한것 같지는 않다. 다만 지금은 이것말고 딱히 다른방법이 떠오르지 않아서 일단 구현하기로 했다. GDG에서 여는 이벤트가 많이 올라와서 이것만 등록해놔도 크게 문제는 없을것 같았다.  </p>
<h2 id="기술-선정"><a href="#기술-선정" class="headerlink" title="기술 선정"></a>기술 선정</h2><h3 id="Golang"><a href="#Golang" class="headerlink" title="Golang"></a>Golang</h3><p>Golang을 공부하고 있어서 프로젝트 목적의 반은 Golang에 좀 익숙해지는데에 있었다. 다른 익숙한 언어를 사용했다면 좀 더 수월하게 개발할 수 있었지만 진행하면서 Golang에 대한 학습도 되고 괜찮았던 것 같다. </p>
<h3 id="Google-Cloud-Firestore"><a href="#Google-Cloud-Firestore" class="headerlink" title="Google Cloud Firestore"></a>Google Cloud Firestore</h3><p>구독자 메일과, 키워드를 저장해놓을 데이터베이스가 필요했다. 선정 기준은 무료여야했고 얼마 되지않고 단순한 데이터를 저장하는 용도라 RDB보단 NoSQL을 선호했다. Firebase가 생각나서 정말 오랜만에 들어갔는데 Realtime Database를 말고 Firestore라는 서비스를 제공하고 있었다. Realtime Database보다는 Firestore가 목적에 좀 더 적합해서 이걸 사용하게 되었다.</p>
<p>두 서비스의 차이점 비교<br><a href="https://firebase.google.com/docs/firestore/rtdb-vs-firestore?hl=ko" rel="external nofollow noopener noreferrer" target="_blank">https://firebase.google.com/docs/firestore/rtdb-vs-firestore?hl=ko</a></p>
<h3 id="AWS-Lambda"><a href="#AWS-Lambda" class="headerlink" title="AWS Lambda"></a>AWS Lambda</h3><p>Schedule 기능이 필요해서 CircleCI Schedule 기능을 알아보다가 람다도 CloudWatch를 이용해서 Schedule 기능을 구현할 수 있다는 걸 알게되었다. Function 별로 Schedule을 설정할 수 있어서 다른 Schedule을 추가하기에도 용이했고 가격도 무료에 가까웠다. 사용해본적도 있어서 람다를 이용하게 되었다.</p>
<h3 id="AWS-SES"><a href="#AWS-SES" class="headerlink" title="AWS SES"></a>AWS SES</h3><p>메일을 보내는 기능은 알림을 위해서 필수적이였다. 메일 전송에 대한 부분은 선택지가 꽤 많은 편이다. <a href="https://www.mailgun.com/" rel="external nofollow noopener noreferrer" target="_blank">mailgun</a>, <a href="https://sendgrid.com/" rel="external nofollow noopener noreferrer" target="_blank">SendGrid</a> 등 무료와 유료 플랜 모두 지원하는 서비스가 여러개 있고 개인 Gmail을 활용하는 방법도 있었다. 처음엔 귀찮아서 내 Gmail 계정을 활용해서 테스트 하다가 AWS SES를 이용하게 됬다. 도메인만 가지고 있으면 손쉽게 Outbound메일 서버를 구축할 수 있고 비용도 사용량이 적은경우 거이 나가지 않는 듯 했다. 자세히 읽어보지는 않아서 다음달 청구서를 봐야할 것 같다. </p>
<h3 id="CircleCI"><a href="#CircleCI" class="headerlink" title="CircleCI"></a>CircleCI</h3><p>CircleCI는 단순히 Serverless Deploy 용도를 위해서 사용하고 있다. Local에서 Deploy해도 충분하지만 최종 커밋이 항상 깨지지 않는 상태를 유지하고 싶었다. Travis만 사용해봐서 CircleCI는 어떤가 사용해보려는 목적도 있었다.  </p>
<h2 id="구현"><a href="#구현" class="headerlink" title="구현"></a>구현</h2><p>전체적인 Flow에 대해서 먼저 생각해보면 아래와 같다. </p>
<ol>
<li>Festa에서 최신 Event 정보를 받아온다. </li>
<li>Firestore에서 구독자 목록을 받아온다.</li>
<li>구독자마다 Event목록 중 알림대상이 있는지 확인한다. </li>
<li>알림대상이 있다면 메일을 전송한다.</li>
</ol>
<p>위 Flow를 하나의 람다로 구성하고 일정시간마다 호출해주면 된다. </p>
<h3 id="Festa-Event"><a href="#Festa-Event" class="headerlink" title="Festa Event"></a>Festa Event</h3><p>먼저 Festa 최신 Event를 받아오는 부분이다. REST API가 있었고 로그인을 하지 않아도 최신 Event를 확인할 수 있었다. 이 부분을 Go로 구현해보자. </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> festa</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"encoding/json"</span></span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"io/ioutil"</span></span><br><span class="line">	<span class="string">"net/http"</span></span><br><span class="line">	<span class="string">"strings"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Festa struct is invoke Festa API</span></span><br><span class="line"><span class="keyword">type</span> Festa <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// EventResponse Festa API response</span></span><br><span class="line"><span class="keyword">type</span> EventResponse <span class="keyword">struct</span> &#123;</span><br><span class="line">	Page     <span class="keyword">string</span>  <span class="string">`json:"page"`</span></span><br><span class="line">	PageSize <span class="keyword">string</span>  <span class="string">`json:"pageSize"`</span></span><br><span class="line">	Total    <span class="keyword">int</span>     <span class="string">`json:"total"`</span></span><br><span class="line">	Rows     []Event <span class="string">`json:"rows"`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// New returning Festa API instance</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">New</span><span class="params">()</span> *<span class="title">Festa</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> &amp;Festa&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> apiEndpoint = ... </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">toQueryString</span><span class="params">(params <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">	arr := []<span class="keyword">string</span>&#123;&#125;</span><br><span class="line">	<span class="keyword">for</span> k, v := <span class="keyword">range</span> params &#123;</span><br><span class="line">		arr = <span class="built_in">append</span>(arr, fmt.Sprintf(<span class="string">"%s=%s"</span>, k, v))</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> strings.Join(arr, <span class="string">"&amp;"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// GetEvents return recent festa events</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *Festa)</span> <span class="title">GetEvents</span><span class="params">()</span> <span class="params">(events []Event)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> eventResponse EventResponse</span><br><span class="line">	queryParam := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>&#123;</span><br><span class="line">          ...</span><br><span class="line">	&#125;</span><br><span class="line">	resp, _ := http.Get(fmt.Sprintf(<span class="string">"%s?%s"</span>, apiEndpoint, toQueryString(queryParam)))</span><br><span class="line"></span><br><span class="line">	responseBytes, _ := ioutil.ReadAll(resp.Body)</span><br><span class="line"></span><br><span class="line">	json.Unmarshal(responseBytes, &amp;eventResponse)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> eventResponse.Rows</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Go는 JSON String을 Unmarshaling할때 Struct 형태로 변환이 가능하다. JSON 필드를 일일이 Struct로 만드는 작업은 매우 손이 많이가고 번거롭기 때문에 다른 툴을 이용해서 변환했다. JSON Response를 input으로 넣으면 Go Struct로 변환해주는 툴이다.<br><a href="https://mholt.github.io/json-to-go/" rel="external nofollow noopener noreferrer" target="_blank">https://mholt.github.io/json-to-go/</a></p>
<h2 id="Firestore"><a href="#Firestore" class="headerlink" title="Firestore"></a>Firestore</h2><p><a href="https://console.firebase.google.com" rel="external nofollow noopener noreferrer" target="_blank">Firebase 콘솔</a> 에서 프로젝트를 생성하면 바로 Firestore 혹은 Realtime Database를 사용할 수 있다. </p>
<p>SDK를 통해서 Firestore에 접근하려면 비공개 키가 필요하다. Firebase 프로젝트 설정에서 비공개 키를 만들고 JSON 형식의 파일로 다운받을 수 있다. Lambda에선 파일을 사용하기 어렵기때문에 파일내용을 JSON으로 환경변수에 넣어놓고 시작시에 Unmarshal 해서 사용하였다. </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// Package db provides firestore client</span></span><br><span class="line"><span class="keyword">package</span> db</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"cloud.google.com/go/firestore"</span></span><br><span class="line">	firebase <span class="string">"firebase.google.com/go"</span></span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"golang.org/x/net/context"</span></span><br><span class="line">	<span class="string">"google.golang.org/api/option"</span></span><br><span class="line">	<span class="string">"os"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> client *firestore.Client</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getOption</span><span class="params">()</span> <span class="title">option</span>.<span class="title">ClientOption</span></span> &#123;</span><br><span class="line">	rawString := os.Getenv(<span class="string">"SERVICE_ACCOUNT_KEY"</span>)</span><br><span class="line">	<span class="keyword">return</span> option.WithCredentialsJSON([]<span class="keyword">byte</span>(rawString))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// GetClient return signletone firestore instance</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GetClient</span><span class="params">()</span> <span class="params">(*firestore.Client, error)</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> client == <span class="literal">nil</span> &#123;</span><br><span class="line"></span><br><span class="line">		ctx := context.Background()</span><br><span class="line">		conf := &amp;firebase.Config&#123;ProjectID: <span class="string">"festa-notify"</span>&#125;</span><br><span class="line"></span><br><span class="line">		app, err := firebase.NewApp(ctx, conf, getOption())</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">nil</span>, fmt.Errorf(<span class="string">"error initializing firebase app: %v"</span>, err)</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		store, err := app.Firestore(ctx)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">nil</span>, fmt.Errorf(<span class="string">"error initializing firestore: %v"</span>, err)</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		client = store</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> client, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Firestore에 대한 instance를 Signletone 형태로 구성해놓고 도메인 별로 Service를 만드는 방식을 사용했다.<br>Collection에 대한 Query, Update 부분은 <a href="https://cloud.google.com/firestore/docs/" rel="external nofollow noopener noreferrer" target="_blank">https://cloud.google.com/firestore/docs/</a> 이곳에 자세하게 나와있다.  </p>
<h3 id="AWS-SES-1"><a href="#AWS-SES-1" class="headerlink" title="AWS SES"></a>AWS SES</h3><p>메일링을 위해서 SES를 셋업해야 한다. 생각보다 SES를 사용하는 방법은 간단하다.<br>SES 페이지에 접속 후 <code>Verify a New Domain</code> 버튼을 눌러서 도메인을 검증하면 Sandbox 모드에서 사용할 수 있게된다. 실제 사용을 위해서는 Sandbox 모드 해제를 신청해야 한다. Sandbox 모드에서는 미리 인증해놓은 이메일에 한해서만 메일 전송이 가능하다.</p>
<p>도메인은 <a href="https://www.freenom.com/en/index.html?lang=en" rel="external nofollow noopener noreferrer" target="_blank">Freemon</a> 에서 무료 도메인을 만들어서 사용했다.<br><img src="/2019/08/25/go-lambda-develop-notify-service/SES_01.png" title="SES Setup"></p>
<p>실제로 메일을 전송할 때는 등록해놓은 도메인으로 전송이 가능하다. 지금은 메일 발송시 <code>noreply@festa-notify.cf</code> 이런식으로 사용하고 있다.</p>
<p>Go 에서 SES 메일 발송을 위해선 이 <a href="https://docs.aws.amazon.com/ko_kr/sdk-for-go/v1/developer-guide/ses-example-send-email.html" rel="external nofollow noopener noreferrer" target="_blank">예제</a>만 참고하면 무리없이 구현할 수 있다. </p>
<h3 id="Serverless-amp-Go"><a href="#Serverless-amp-Go" class="headerlink" title="Serverless &amp; Go"></a>Serverless &amp; Go</h3><p>Lambda 배포를 위해 Serverless 프레임워크를 사용하였다. Go를 Serverless를 통해서 Lambda에 배포하는건 Node.js에 비해 간단한 느낌을 받았다. 단순히 Go func를 만들고 Labmda 라이브러리에 해당 핸들러를 넘겨주면 된다.</p>
<p>Serverless Blog에서 간단한 Example에 대해서 소개한다.<br><a href="https://serverless.com/blog/framework-example-golang-lambda-support/" rel="external nofollow noopener noreferrer" target="_blank">https://serverless.com/blog/framework-example-golang-lambda-support/</a></p>
<p>위 예제에서는 go dep를 이용하는 방법에 대해 나오는데 나는 Go modules를 사용하고 있어서 의존성 관리 부분을 제외하고는 예제를 따라서 구현했다. 이미 개발중인 프로젝트에 적용시에는 <code>Makefile</code>, <code>serverless.yml</code> 설정만 옮겨서 프로젝트에 맞게 설정해주면 쉽게 AWS Lambda로 배포할 수 있다.</p>
<h3 id="CloudWatch-Event"><a href="#CloudWatch-Event" class="headerlink" title="CloudWatch Event"></a>CloudWatch Event</h3><p>CloudWatch는 보통 AWS 관련로그를 보는 용도로 사용하는데 여기에 이벤트라는 기능이 있다. 이 이벤트를 이용하면 특정시간 혹은 주기적으로 어떤 람다를 호출해줄 수 있다. </p>
<p>CloudWatch에 Event 탭으로 이동해서 규칙을 생성해주기만 하면 된다. rate 혹은 crontab 표현식으로 등록할 수 있다.<br><img src="/2019/08/25/go-lambda-develop-notify-service/CloudWatch.png" title="Cloud Watch"></p>
<h2 id="메일-알림"><a href="#메일-알림" class="headerlink" title="메일 알림"></a>메일 알림</h2><p><img src="https://user-images.githubusercontent.com/2585676/63648974-9f0ae000-c772-11e9-8785-672b5efa224b.png" alt="https://user-images.githubusercontent.com/2585676/63648974-9f0ae000-c772-11e9-8785-672b5efa224b.png"></p>
<h2 id="Github"><a href="#Github" class="headerlink" title="Github"></a>Github</h2><p>이 프로젝트의 코드는 아래 Repo에 모두 공개되어 있다.<br><a href="https://github.com/y0c/festa-notify" rel="external nofollow noopener noreferrer" target="_blank">https://github.com/y0c/festa-notify</a></p>
<h2 id="마치며"><a href="#마치며" class="headerlink" title="마치며"></a>마치며</h2><ul>
<li>Go가 아직 익숙하지 않아서 생각보다 오래걸렸지만 언어 자체는 간편하고 장점이 많아 보인다.</li>
<li>SES를 사용한 다른 글을 보면 Sandbox 모드 해제는 하루정도면 되는 것 같은데 주말때문인지 오래걸리는 케이스도 있는 것 같다.  </li>
</ul>
<p>작은 프로젝트지만 자세히 적으려니 생각보다 내용이 많아서 전체적인 맥락에 대해서만 간단히 정리해보았다.</p>
</div><div class="article__tags"><a class="article__tags__item" href="/tags/Go/">Go</a><a class="article__tags__item" href="/tags/Lambda/">Lambda</a><a class="article__tags__item" href="/tags/SES/">SES</a><a class="article__tags__item" href="/tags/Serverless/">Serverless</a></div><div class="article__author" itemscope="" itemprop="author" itemtype="https://schema.org/Person"><img class="article__author__image" src="/images/profile.jpg" alt="hosung"><a class="article__author__link" title="About hosung" rel="author">hosung</a><p class="article__author__desc">🔥 Typescript</p><div class="article__author__socials"><a class="article__author__socials__item" href="http://github.com/y0c" title="github" target="_blank" rel="external nofollow noopener noreferrer"><i class="fa fa-github"></i></a><a class="article__author__socials__item" href="/feed.xml" title="rss" target="_blank"><i class="fa fa-rss"></i></a></div><meta itemprop="name" content="hosung"></div><div class="sharer" id="sharer"><div class="sharer-inner"><div class="sharer__right"><button class="sharer__item" id="sharer-facebook"><i class="fa fa-facebook-official"></i></button><button class="sharer__item" id="sharer-twitter"><i class="fa fa-twitter"></i></button><button class="sharer__item" id="sharer-pinterest"><i class="fa fa-pinterest"></i></button><button class="sharer__item" id="sharer-pocket"><i class="fa fa-get-pocket"></i></button></div></div></div><!-- Disqus Code--><div id="disqus_thread"></div><script>(function() {
  var d = document, s = d.createElement('script');
  s.src = '//lazy-developer.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
})();</script><noscript>Enable JavaScript to see comments.</noscript><!-- Meta Tags for Structured Data--><meta itemprop="dateModified" content="2019-08-25T15:24:06.422Z"><meta itemprop="articleBody" content="평소에 Festa 라는 이벤트 플랫폼을 가끔씩 이용하는 편이다. 이 서비스에는 내가 관심있는 IT 관련 세미나 혹은 해커톤과 같은 밋업이 종종 올라오곤 한다. 보통은 페이스북 그룹에 공유된 글을 통해서 혹은 지인들을 통해서 알게됬는데 그럼에도 놓치는 것들이 있었다. 이번에 하던일이 끝나고 시간이 좀 남아서 Festa에 최신 이벤트에 대해서 메일로..."><meta itemprop="url" content="https://y0c.github.io/2019/08/25/go-lambda-develop-notify-service/"><meta itemprop="mainEntityOfPage" content="https://y0c.github.io/2019/08/25/go-lambda-develop-notify-service/"><div itemscope="" itemtype="https://schema.org/Organization" itemprop="publisher"><meta itemprop="name" content="y0c"><div itemscope="" itemprop="logo" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://y0c.github.io/images/logo.png"></div></div><div itemscope="" itemtype="https://schema.org/ImageObject" itemprop="image"><meta itemprop="contentUrl" content="https://y0c.github.io/images/go_lambda.png"><meta itemprop="url" content="https://y0c.github.io/images/go_lambda.png"><meta itemprop="width"><meta itemprop="height"></div></article><section class="related-posts"><h3>Related posts</h3><div class="related-posts__item__wrapper"><a class="related-posts__item" href="/2019/08/11/beginning-go/"><div class="related-posts__item__background" style="background-image:url('/images/golang-tdd.png');"></div><div class="related-posts__item__overlay"></div><span class="related-posts__item__title">TDD로 Golang 시작하기</span></a></div></section></div></div></div><footer id="footer"><div class="widgets"><div class="widgets-inner"><!-- Jade doesn't support dynamic inclusion with `each`.--><!-- So, I just hard coded the file names that will be included.--><div class="widgets__item"><h3 class="widgets__item__heading">Recent posts</h3><ul class="recent-posts"><li class="recent-posts__item"><a href="/2019/11/17/graphql-data-mocking/">GraphQL Data Mocking</a></li><li class="recent-posts__item"><a href="/2019/08/25/go-lambda-develop-notify-service/">Golang과 Lambda를 활용한 알림 서비스 개발기</a></li><li class="recent-posts__item"><a href="/2019/08/11/beginning-go/">TDD로 Golang 시작하기</a></li><li class="recent-posts__item"><a href="/2019/07/14/vim-config-for-js-developer/">Vim Configuration 정리</a></li><li class="recent-posts__item"><a href="/2019/06/30/react-infinite-scroll/">React Infinite scroll 구현하기</a></li></ul></div><div class="widgets__item"><h3 class="widgets__item__heading">Archives</h3><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">2</span></li></ul></div><div class="widgets__item"><h3 class="widgets__item__heading">Categories</h3><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Go/">Go</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Javascript/">Javascript</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/React/">React</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Redis/">Redis</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tmux/">Tmux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/graphql/">graphql</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/serverless/">serverless</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/vim/">vim</a><span class="category-list-count">1</span></li></ul></div></div></div><p class="copyright"><small>© 2019 hosung<br>Powered by <a href="https://hexo.io" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a>, Theme by <a href="https://github.com/hyunseob" rel="external nofollow noopener noreferrer" target="_blank">HyunSeob</a></small></p></footer><script src="/js/sharer.min.js"></script></body></html>