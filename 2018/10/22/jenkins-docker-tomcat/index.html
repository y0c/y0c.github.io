<!DOCTYPE html><html><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Jenkins x Docker Tomcat War ë°°í¬í•˜ê¸° | y0c</title><link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/css/highlights/dracula.css"><link rel="canonical" href="https://y0c.github.io/2018/10/22/jenkins-docker-tomcat/">
<meta name="description" content="ìš”ì¦˜ì˜ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì€ ì–´ë–»ê²Œ ë§Œë“¤ê¹Œë„ ë§ì´ ê³ ë¯¼í•˜ì§€ë§Œ ì–´ë–»ê²Œ ìš´ì˜í•˜ê³  ìœ ì§€ë³´ìˆ˜ í•  ê²ƒì¸ê°€? ì— ëŒ€í•œ ê³ ë¯¼ì„ ë§ì´ í•˜ëŠ”ê²ƒ ê°™ë‹¤. ì–´í”Œë¦¬ì¼€ì´ì…˜ êµ¬í˜„ë³´ë‹¤ëŠ” ìš´ì˜ì— ì´ˆì ì´ ë§ì¶°ì§€ëŠ” ê²ƒì´ë‹¤.  ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì„ ë¶„ì„/ê°œë°œ/í…ŒìŠ¤íŠ¸/ë°°í¬/ìš´ì˜ ì˜ ë‹¨ê³„ë¡œâ€¦">
<meta name="keywords" content="Docker,Jenkins">
<meta property="og:type" content="article">
<meta property="og:title" content="Jenkins x Docker Tomcat War ë°°í¬í•˜ê¸°">
<meta property="og:url" content="https://y0c.github.io/2018/10/22/jenkins-docker-tomcat/">
<meta property="og:site_name" content="y0c">
<meta property="og:description" content="ìš”ì¦˜ì˜ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì€ ì–´ë–»ê²Œ ë§Œë“¤ê¹Œë„ ë§ì´ ê³ ë¯¼í•˜ì§€ë§Œ ì–´ë–»ê²Œ ìš´ì˜í•˜ê³  ìœ ì§€ë³´ìˆ˜ í•  ê²ƒì¸ê°€? ì— ëŒ€í•œ ê³ ë¯¼ì„ ë§ì´ í•˜ëŠ”ê²ƒ ê°™ë‹¤. ì–´í”Œë¦¬ì¼€ì´ì…˜ êµ¬í˜„ë³´ë‹¤ëŠ” ìš´ì˜ì— ì´ˆì ì´ ë§ì¶°ì§€ëŠ” ê²ƒì´ë‹¤.  ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì„ ë¶„ì„/ê°œë°œ/í…ŒìŠ¤íŠ¸/ë°°í¬/ìš´ì˜ ì˜ ë‹¨ê³„ë¡œâ€¦">
<meta property="og:image" content="https://y0c.github.io/images/jenkinsxdocker.png">
<meta property="og:updated_time" content="2018-10-22T06:30:12.092Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Jenkins x Docker Tomcat War ë°°í¬í•˜ê¸°">
<meta name="twitter:description" content="ìš”ì¦˜ì˜ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì€ ì–´ë–»ê²Œ ë§Œë“¤ê¹Œë„ ë§ì´ ê³ ë¯¼í•˜ì§€ë§Œ ì–´ë–»ê²Œ ìš´ì˜í•˜ê³  ìœ ì§€ë³´ìˆ˜ í•  ê²ƒì¸ê°€? ì— ëŒ€í•œ ê³ ë¯¼ì„ ë§ì´ í•˜ëŠ”ê²ƒ ê°™ë‹¤. ì–´í”Œë¦¬ì¼€ì´ì…˜ êµ¬í˜„ë³´ë‹¤ëŠ” ìš´ì˜ì— ì´ˆì ì´ ë§ì¶°ì§€ëŠ” ê²ƒì´ë‹¤.  ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì„ ë¶„ì„/ê°œë°œ/í…ŒìŠ¤íŠ¸/ë°°í¬/ìš´ì˜ ì˜ ë‹¨ê³„ë¡œâ€¦">
<meta name="twitter:image" content="https://y0c.github.io/images/jenkinsxdocker.png"><meta property="article:author" content="hosung"><meta property="twitter:label1" content="Published at"><meta property="twitter:data1" content="2018-10-22 13:00:15"><meta property="twitter:label2" content="Written by"><meta property="twitter:data2" content="hosung"><link rel="icon" href="/images/logo.png"><link rel="alternate" href="/feed.xml" type="application/atom+xml" title="y0c"><script>(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-112029921-1', 'auto');
ga('send', 'pageview');</script></head><body itemscope="" itemtype="https://schema.org/WebPage"><nav class="menu" id="menu"><div class="menu-inner"><div class="menu__left-area"><div class="menu__item"><a class="menu__item__link menu__item__link--brand" href="/" title="Home" rel="home"><img class="menu__item__link--brand__image" src="/images/logo.png" alt="y0c"><span class="menu__item__link--brand__label">y0c</span></a></div></div><div class="menu__right-area"><div class="menu__item"><a class="menu__item__link" href="/">Home</a></div><div class="menu__item"><a class="menu__item__link" href="/archives">Archives</a></div></div></div></nav><div class="page-background"></div><div class="content-container"><div class="content-outer"><div class="content-inner" itemscope="" itemtype="https://schema.org/Blog"><article class="article" id="article" itemscope="" itemtype="https://schema.org/BlogPosting"><h1 class="article__title" itemprop="headline">Jenkins x Docker Tomcat War ë°°í¬í•˜ê¸°</h1><div class="article__meta"><time class="article__meta__time" datetime="2018-10-22T04:00:15.000Z" itemprop="datePublished">2018-10-22 13:00:15</time><div class="article__meta__categories"><a class="article__meta__categories__item" href="/categories/Docker/">Docker</a></div></div><div class="article__contents"><img src="/images/jenkinsxdocker.png"><p>ìš”ì¦˜ì˜ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì€ ì–´ë–»ê²Œ ë§Œë“¤ê¹Œë„ ë§ì´ ê³ ë¯¼í•˜ì§€ë§Œ ì–´ë–»ê²Œ ìš´ì˜í•˜ê³  ìœ ì§€ë³´ìˆ˜ í•  ê²ƒì¸ê°€? ì— ëŒ€í•œ ê³ ë¯¼ì„ ë§ì´ í•˜ëŠ”ê²ƒ ê°™ë‹¤. ì–´í”Œë¦¬ì¼€ì´ì…˜ êµ¬í˜„ë³´ë‹¤ëŠ” ìš´ì˜ì— ì´ˆì ì´ ë§ì¶°ì§€ëŠ” ê²ƒì´ë‹¤.  ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì„ ë¶„ì„/ê°œë°œ/í…ŒìŠ¤íŠ¸/ë°°í¬/ìš´ì˜ ì˜ ë‹¨ê³„ë¡œ ë‚˜ëˆˆë‹¤ë©´ ë°°í¬/ìš´ì˜ì„ ëœ»í•œë‹¤. í•„ìëŠ” ìƒì‚°ì„±ì— ìˆì–´ì„œ êµ‰ì¥íˆ ê´€ì‹¬ì´ ë§ì€ í¸ì¸ë° ê°œë°œì„ í•˜ë©´ì„œ ì§€ì†ì ìœ¼ë¡œ ëŠë¼ëŠ”ì ì´ ë°°í¬/ìš´ì˜ì— ëŒ€í•œ ì •í™•í•œ í”„ë¡œì„¸ìŠ¤ê°€ ì •í™•íˆ êµ¬ì¶•ë˜ì–´ìˆì§€ ì•Šìœ¼ë©´ ì¶”í›„ì— ë§ì€ ìƒì‚°ì„± ë‚­ë¹„ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤.</p>
<p>Dockerë¥¼ ì‚¬ìš©í•˜ê¸° ì „ì—ëŠ” Mavenê¸°ë°˜ì˜ í”„ë¡œì íŠ¸ë¥¼ ë°°í¬í• ë•Œ ë³´í†µ Jenkinsì—ì„œ SCPì™€ SSHë¥¼ í†µí•œ ë°°í¬ í˜¹ì€ <a href="https://plugins.jenkins.io/deploy" rel="external nofollow noopener noreferrer" target="_blank">Deploy to Container Plugins</a> , Maven ì˜ Tomcat í”ŒëŸ¬ê·¸ì¸ ë“± ì—¬ëŸ¬ê°€ì§€ ë°©ë²•ì„ í†µí•´ì„œ ë°°í¬í•´ì™”ì§€ë§Œ ë¨¼ê°€ ë¶€ì¡±í•œ ëŠë‚Œì´ ë“¤ì—ˆë‹¤.<br>ì´ëŸ°ë°©ì‹ë“¤ ëª¨ë‘ ë°°í¬í•˜ëŠ” ì„œë²„í™˜ê²½ì— ì˜ì¡´ì ì´ê±°ë‚˜ WAS  Containerì— ì˜ì¡´ì ì´ê¸° ë•Œë¬¸ì´ë‹¤. DockerëŠ” DevOpsì˜ ë„êµ¬ë¡œ ìì£¼ì“°ì´ëŠ” ë„êµ¬ì¸ ë§Œí¼ ë§ì€ ì˜ì¡´ì„±ë“¤ì„ ì œê±°í•  ìˆ˜ ìˆê³  ë©±ë“±ì„±(idempotent)ì„ ì œê³µí•œë‹¤.</p>
<p>ì´ë²ˆ í¬ìŠ¤íŒ…ì€ Mavenê¸°ë°˜ì˜ í”„ë¡œì íŠ¸ë¥¼ Dockerizing í›„ Jenkinsë¥¼ í†µí•´ì„œ ë°°í¬í•˜ëŠ” Workflow êµ¬ì¶•ì— ëŒ€í•´ ì†Œê°œí•˜ë ¤í•œë‹¤.</p>
<h2 id="Deploy-Flow"><a href="#Deploy-Flow" class="headerlink" title="Deploy Flow"></a>Deploy Flow</h2><img src="/2018/10/22/jenkins-docker-tomcat/workflow.png" title="React LifeCycle Unmounting">
<ol>
<li>ê°œë°œí•œ ë‚´ìš©ì„ Git, Svn ì— ë°˜ì˜í•œë‹¤.</li>
<li>Jenkins Workspaceë¡œ Pull ì„ ë°›ëŠ”ë‹¤.</li>
<li>Maven í˜¹ì€, Gradleê³¼ ê°™ì€ ë¹Œë“œ ë„êµ¬ë¥¼ í†µí•´ Buildë¥¼ í•œë‹¤.</li>
<li>Docker Image ë¡œ Dockerizing í•œë‹¤.</li>
<li>Private Registryì— Push í•´ì¤€ë‹¤.</li>
<li>ì›ê²©ì§€ì—ì„œ  Imageë¥¼ Pull ë°›ì€ í›„ Containerë¥¼ ë°°í¬í•œë‹¤. (Run)</li>
</ol>
<p>ì—¬ê¸°ì„œ 5ë²ˆì¸ Private RegistryëŠ” êµ¬ì§€ ë”°ë¡œ êµ¬ì¶•í•˜ê³  ì‹¶ì§€ì•Šë‹¤ë©´ SSHë¥¼ í†µí•´ì„œ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ê±°ë‚˜ ë‹¤ë¥¸ë°©ë²•ì„ ì‚¬ìš©í•˜ì—¬ë„ ì¢‹ë‹¤.  ì´ ê¸€ì—ì„  Registry ë¥¼ ì´ìš©í•œë‹¤.</p>
<h3 id="Jenkins-ì„¤ì¹˜"><a href="#Jenkins-ì„¤ì¹˜" class="headerlink" title="Jenkins ì„¤ì¹˜"></a>Jenkins ì„¤ì¹˜</h3><p>ë¨¼ì € Jenkinsë¥¼ ì„¤ì¹˜í•´ë³´ì. ì´ë²ˆ ì£¼ì œëŠ” Dockerë¥¼ í™œìš©í•˜ëŠ” ë§Œí¼ Dockerë¥¼ í†µí•´ì„œ ì„¤ì¹˜í•´ë³¼ ê²ƒì´ë‹¤.</p>
<p>Dockerë¥¼ ì´ìš©í•œ ì„¤ì¹˜ëŠ” ì •ë§ ê°„ë‹¨í•˜ë‹¤.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker pull jenkins/jenkins:latest</span><br><span class="line">docker run -p 8080:8080 \</span><br><span class="line">   	  -e TZ=<span class="string">'Asia/Seoul'</span></span><br><span class="line">        --name jenkins \</span><br><span class="line">        -v ./jenkins:/var/jenkins_home -d</span><br></pre></td></tr></table></figure></p>
<p>ê°„ë‹¨í•˜ê²Œ ì‚¬ìš©í•œë‹¤ë©´ ì´ì •ë„ë§Œ ê°€ì§€ê³  ì‹¤í–‰ì‹œí‚¤ë©´ ëœë‹¤.</p>
<p>í•˜ì§€ë§Œ Jenkinsë¥¼ Dockerë¡œ ì„¤ì¹˜í•  ê²½ìš° Docker ë‚´ë¶€ì—ì„œ Pull &amp; Buildê°€ ì§„í–‰ë˜ê¸° ë•Œë¬¸ì— ë°°í¬ëŠ” ëª¨ë‘ Containerê¸°ì¤€ìœ¼ë¡œ ì›ê²©ì§€ê°€ ëœë‹¤. ì¦‰ Host OSì— ë°°í¬í•˜ëŠ”ê²ƒë„ ì›ê²©ì§€ì²˜ëŸ¼ ë°°í¬í•´ì•¼ í•œë‹¤.</p>
<p>SSHë¥¼ í†µí•´ì„œ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰ì‹œí‚¬ìˆ˜ë„ ìˆì§€ë§Œ Docker ì—ì„œëŠ” TCP Socketì„ ì§€ì›í•œë‹¤.<br>ì´ TCP Socketì„ ì´ìš©í•˜ë©´ í™˜ê²½ë³€ìˆ˜ ì§€ì •í•˜ëŠ”ê²ƒìœ¼ë¡œ Remote ì— ìˆëŠ” Docker ëª…ë ¹ì´ ê°€ëŠ¥í•´ì§„ë‹¤.</p>
<p>ê°„ë‹¨í•œ ì˜ˆì œë¥¼ í†µí•´ì„œ ì´í•´í•´ë³´ì<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">export</span> DOCKER_HOST=tcp://192.168.0.10:4243</span><br><span class="line">docker ps</span><br></pre></td></tr></table></figure></p>
<p>ìœ„ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ê²Œë˜ë©´ í•´ë‹¹ ì£¼ì†Œì— ìˆëŠ” docker í”„ë¡œì„¸ìŠ¤ ì •ë³´ë¥¼ ë³´ì—¬ì¤€ë‹¤.</p>
<p>TCP Socketì„  ì‚¬ìš©í•˜ê¸°ìœ„í•´ ì¤€ë¹„í•´ì•¼í•  ê²ƒë“¤ì´ ìˆë‹¤.</p>
<ul>
<li>Jenkins Container ë‚´ë¶€ì— Dockerê°€ ì„¤ì¹˜ ë˜ì–´ìˆì–´ì•¼ í•œë‹¤.</li>
<li>ë°°í¬í•  ì›ê²©ì§€ì— TCP Socketì´ í™œì„±í™” ë˜ì–´ìˆì–´ì•¼ í•œë‹¤.<br><a href="https://success.docker.com/article/how-do-i-enable-the-remote-api-for-dockerd" rel="external nofollow noopener noreferrer" target="_blank">Docker - How do I enable the remote API for dockerd</a> ì°¸ê³ </li>
</ul>
<p>Jenkins ì´ë¯¸ì§€ì—ì„œ Docker ëª…ë ¹ì´ ê°€ëŠ¥í•˜ë„ë¡ Imageë¥¼ ì»¤ìŠ¤í„°ë§ˆì´ì§• í•œë‹¤.<br>ì•„ë˜ Dockerfileì„ ì°¸ê³ í•˜ì<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># dind-jenkins</span><br><span class="line">FROM jenkinsci/jenkins:latest</span><br><span class="line"></span><br><span class="line">USER root</span><br><span class="line">RUN apt-get update -qq</span><br><span class="line">RUN apt-get install -qqy apt-transport-https ca-certificates</span><br><span class="line">RUN apt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D</span><br><span class="line">RUN echo deb https://apt.dockerproject.org/repo debian-jessie main &gt; /etc/apt/sources.list.d/docker.list</span><br><span class="line">RUN apt-get update -qq</span><br><span class="line">RUN apt-get install -qqy docker-engine</span><br><span class="line"></span><br><span class="line">USER jenkins</span><br></pre></td></tr></table></figure></p>
<p>ì´ë ‡ê²Œ docker container ë‚´ë¶€ì— dockerë¥¼ ì„¤ì¹˜í•˜ëŠ”ê²ƒì„ Docker in Docker ë¼ê³  í•œë‹¤.</p>
<p>ìœ„ íŒŒì¼ë¡œ dind-jenkins ì´ë¯¸ì§€ë¥¼ Build í•œ í›„ í•„ìš”í•œ ì˜µì…˜ë§Œ ë„£ì–´ì„œ Run ì‹œí‚¨ë‹¤.<br>ì´ˆê¸°ì— íŒ¨ìŠ¤ì›Œë“œë¥¼ ë„£ëŠ” ì°½ì´ ë‚˜ì˜¤ëŠ”ë° Docker Container ì— ë“¤ì–´ê°€ì„œ í™•ì¸í•´ì•¼í•œë‹¤.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it dind-jenkins /bin/bash</span><br><span class="line">cat /var/lib/jenkins/secrets/initialAdminPassword</span><br></pre></td></tr></table></figure></p>
<p>ê·¸ ì´í›„ì—ëŠ” í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì¹˜í•˜ê³  ê³„ì •ì„¤ì •ì„ í•´ì£¼ë©´ ëœë‹¤.</p>
<p>Jenkins ì„¤ì¹˜ê°€ ì™„ë£Œë¬ìœ¼ë©´ Pipeline Jobì„ ìƒì„±í•œë‹¤.<br>ê¸°í˜¸ì— ë”°ë¼ Maven Jobì´ë‚˜ FreeStyle Jobì„ ìƒì„±í•  ìˆ˜ ìˆì§€ë§Œ ìµœê·¼ì—” ì¸í”„ë¼ ì„¤ì •ì„ ìˆ˜ë™ìœ¼ë¡œ ì„¤ì •í•˜ëŠ” ëŒ€ì‹  ì½”ë“œë¡œ ê´€ë¦¬í•˜ëŠ” Infrastructure as Codeë°©ì‹ì´ ë§ì´ ì“°ì´ê³  ìˆë‹¤.</p>
<p>í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— JenkinsíŒŒì¼ê³¼ Dockerfileì„ ìƒì„±í•œë‹¤.<br>Jenkinsfileì€ Jenkins Build ì„¤ì •ì„ ì‘ì„±í•´ì•¼í•œë‹¤.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">def mvnHome</span><br><span class="line">node &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">        stage(<span class="string">'Checkout'</span>) &#123;</span><br><span class="line">            checkout scm</span><br><span class="line">            mvnHome = tool <span class="string">'M3'</span></span><br><span class="line">        &#125;</span><br><span class="line">        stage(<span class="string">'Environment'</span>) &#123;</span><br><span class="line">            sh <span class="string">'git --version'</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"Branch: <span class="variable">$&#123;env.BRANCH_NAME&#125;</span>"</span></span><br><span class="line">            sh <span class="string">'docker -v'</span></span><br><span class="line">            sh <span class="string">'printenv'</span></span><br><span class="line">        &#125;</span><br><span class="line">        stage(<span class="string">'Push Image'</span>) &#123;</span><br><span class="line">            sh <span class="string">"'<span class="variable">$&#123;mvnHome&#125;</span>/bin/mvn' clean install -P production"</span></span><br><span class="line">            sh(<span class="string">'scripts/image.sh'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        stage(<span class="string">'Deploy'</span>) &#123;</span><br><span class="line">            sh(<span class="string">'scripts/deploy.sh'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; catch (err) &#123;</span><br><span class="line">        throw err</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><code>image.sh</code>  ì—ëŠ” Private Registryì— Pushí•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸íŒŒì¼ì´ë‹¤.<br><code>deploy.sh</code> ì—ëŠ” Private Registryì—ì„œ Pull ë°›ì€ í›„ Docker Container ë¥¼ run í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì´ë‹¤.</p>
<p>ìƒí™©ì— ë§ê²Œ ê³¨ê²©ì— ë§ì¶°ì„œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•´ì£¼ë©´ ëœë‹¤.</p>
<p>ì•„ë˜ëŠ” waríŒŒì¼ì„ Docker Imageë¡œ Dockerizing í•  ìˆ˜ ìˆëŠ” Dockerfile ì´ë‹¤.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">FROM tomcat:8-jre8</span><br><span class="line">WORKDIR /usr/local/tomcat</span><br><span class="line">RUN rm -rf ./webapps/*</span><br><span class="line">COPY ./target/*.war ./webapps/ROOT.war</span><br><span class="line">EXPOSE 8080</span><br><span class="line">CMD $CATALINA_HOME/bin/startup.sh &amp;&amp; tail -f $CATALINA_HOME/logs/catalina.out</span><br></pre></td></tr></table></figure></p>
<p>tomcatì€ ì•Œë§ëŠ” jre ë²„ì „ê³¼ í†°ìº£ ë²„ì „ì„  ì„ íƒí•´ì„œ Base Image ë¥¼ ìƒì„±í•˜ë©´ ëœë‹¤.</p>
<h2 id="ë§ˆë¬´ë¦¬"><a href="#ë§ˆë¬´ë¦¬" class="headerlink" title="ë§ˆë¬´ë¦¬"></a>ë§ˆë¬´ë¦¬</h2><p>Dockerë¥¼ í™œìš©í•œ ë°°í¬ëŠ” ê¸°ì¡´ì˜ ë°©ì‹ë³´ë‹¤ ì„œë²„ì— ëŒ€í•œ ì˜ì¡´ì„±ì— ë§ì€ ë¶€ë¶„ì„ ì œê±°í•  ìˆ˜ ìˆë‹¤. Tomcat Managerë¥¼ í†µí•´ì„œ ë°°í¬í• ë–ˆ Out of memory í˜¹ì€ jdk ë²„ì „ì˜ ë¬¸ì œ ë“± ëª‡ê°€ì§€ ì´ìŠˆê°€ ìˆì—ˆëŠ”ë° ë§ì€ë¶€ë¶„ì„ í•´ì†Œí•´ì£¼ì—ˆë‹¤. ë‹¤ìŒì—” Docker Swarmì„ í†µí•œ Container orchestration ê´€ë¦¬ì— ëŒ€í•´ ë‹¤ë¤„ë³´ë ¤í•œë‹¤.</p>
</div><div class="article__tags"><a class="article__tags__item" href="/tags/Docker/">Docker</a><a class="article__tags__item" href="/tags/Jenkins/">Jenkins</a></div><div class="article__author" itemscope="" itemprop="author" itemtype="https://schema.org/Person"><img class="article__author__image" src="/images/profile.jpg" alt="hosung"><a class="article__author__link" title="About hosung" rel="author">hosung</a><p class="article__author__desc">ğŸ”¥ Typescript</p><div class="article__author__socials"><a class="article__author__socials__item" href="http://github.com/y0c" title="github" target="_blank" rel="external nofollow noopener noreferrer"><i class="fa fa-github"></i></a><a class="article__author__socials__item" href="/feed.xml" title="rss" target="_blank"><i class="fa fa-rss"></i></a></div><meta itemprop="name" content="hosung"></div><div class="sharer" id="sharer"><div class="sharer-inner"><div class="sharer__right"><button class="sharer__item" id="sharer-facebook"><i class="fa fa-facebook-official"></i></button><button class="sharer__item" id="sharer-twitter"><i class="fa fa-twitter"></i></button><button class="sharer__item" id="sharer-pinterest"><i class="fa fa-pinterest"></i></button><button class="sharer__item" id="sharer-pocket"><i class="fa fa-get-pocket"></i></button></div></div></div><!-- Disqus Code--><div id="disqus_thread"></div><script>(function() {
  var d = document, s = d.createElement('script');
  s.src = '//lazy-developer.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
})();</script><noscript>Enable JavaScript to see comments.</noscript><!-- Meta Tags for Structured Data--><meta itemprop="dateModified" content="2018-10-22T06:30:12.092Z"><meta itemprop="articleBody" content="ìš”ì¦˜ì˜ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì€ ì–´ë–»ê²Œ ë§Œë“¤ê¹Œë„ ë§ì´ ê³ ë¯¼í•˜ì§€ë§Œ ì–´ë–»ê²Œ ìš´ì˜í•˜ê³  ìœ ì§€ë³´ìˆ˜ í•  ê²ƒì¸ê°€? ì— ëŒ€í•œ ê³ ë¯¼ì„ ë§ì´ í•˜ëŠ”ê²ƒ ê°™ë‹¤. ì–´í”Œë¦¬ì¼€ì´ì…˜ êµ¬í˜„ë³´ë‹¤ëŠ” ìš´ì˜ì— ì´ˆì ì´ ë§ì¶°ì§€ëŠ” ê²ƒì´ë‹¤.  ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì„ ë¶„ì„/ê°œë°œ/í…ŒìŠ¤íŠ¸/ë°°í¬/ìš´ì˜ ì˜ ë‹¨ê³„ë¡œ ë‚˜ëˆˆë‹¤ë©´ ë°°í¬/ìš´ì˜ì„ ëœ»í•œë‹¤. í•„ìëŠ” ìƒì‚°ì„±ì— ìˆì–´ì„œ êµ‰ì¥íˆ ê´€ì‹¬ì´ ë§ì€ í¸ì¸ë° ê°œë°œì„ í•˜ë©´ì„œ ì§€ì†ì ìœ¼ë¡œ..."><meta itemprop="url" content="https://y0c.github.io/2018/10/22/jenkins-docker-tomcat/"><meta itemprop="mainEntityOfPage" content="https://y0c.github.io/2018/10/22/jenkins-docker-tomcat/"><div itemscope="" itemtype="https://schema.org/Organization" itemprop="publisher"><meta itemprop="name" content="y0c"><div itemscope="" itemprop="logo" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://y0c.github.io/images/logo.png"></div></div><div itemscope="" itemtype="https://schema.org/ImageObject" itemprop="image"><meta itemprop="contentUrl" content="https://y0c.github.io/images/jenkinsxdocker.png"><meta itemprop="url" content="https://y0c.github.io/images/jenkinsxdocker.png"><meta itemprop="width"><meta itemprop="height"></div></article><section class="related-posts"><h3>Related posts</h3><div class="related-posts__item__wrapper"><a class="related-posts__item" href="/2018/10/20/Docker-Private-Registry/"><div class="related-posts__item__background" style="background-image:url('/images/docker.png');"></div><div class="related-posts__item__overlay"></div><span class="related-posts__item__title">Docker Private Registry êµ¬ì¶•í•˜ê¸°</span></a></div></section></div></div></div><footer id="footer"><div class="widgets"><div class="widgets-inner"><!-- Jade doesn't support dynamic inclusion with `each`.--><!-- So, I just hard coded the file names that will be included.--><div class="widgets__item"><h3 class="widgets__item__heading">Recent posts</h3><ul class="recent-posts"><li class="recent-posts__item"><a href="/2019/11/24/graphql-query-optimize-with-dataloader/">GraphQL DataLoaderë¥¼ ì´ìš©í•œ ì„±ëŠ¥ ìµœì í™”</a></li><li class="recent-posts__item"><a href="/2019/11/17/graphql-data-mocking/">GraphQL Data Mocking</a></li><li class="recent-posts__item"><a href="/2019/08/25/go-lambda-develop-notify-service/">Golangê³¼ Lambdaë¥¼ í™œìš©í•œ ì•Œë¦¼ ì„œë¹„ìŠ¤ ê°œë°œê¸°</a></li><li class="recent-posts__item"><a href="/2019/08/11/beginning-go/">TDDë¡œ Golang ì‹œì‘í•˜ê¸°</a></li><li class="recent-posts__item"><a href="/2019/07/14/vim-config-for-js-developer/">Vim Configuration ì •ë¦¬</a></li></ul></div><div class="widgets__item"><h3 class="widgets__item__heading">Archives</h3><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">2</span></li></ul></div><div class="widgets__item"><h3 class="widgets__item__heading">Categories</h3><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Go/">Go</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Javascript/">Javascript</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/React/">React</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Redis/">Redis</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tmux/">Tmux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/graphql/">graphql</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/serverless/">serverless</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/vim/">vim</a><span class="category-list-count">1</span></li></ul></div></div></div><p class="copyright"><small>Â© 2019 hosung<br>Powered by <a href="https://hexo.io" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a>, Theme by <a href="https://github.com/hyunseob" rel="external nofollow noopener noreferrer" target="_blank">HyunSeob</a></small></p></footer><script src="/js/sharer.min.js"></script></body></html>